//≪文字変数一覧・制作ガイド・共用ルーチン≫「★(※検索用アイコン)」
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//変数一覧メモ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼重要SWITCH関連▼〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//【SWITCHstory・ｽﾄｰﾘｰ勢力発動(0なし1~番号勢力稼働中)】
//【SWITCHskip・会話ｽｷｯﾌﾟ設定(0なし1あり10確認後なし11確認後あり】
//【SWITCHchapter??・進行章(1実行済)】
//【SWITCHdestinyPoint・ﾄﾘｶﾞｰﾎﾟｲﾝﾄ(0~99ｹﾞｰﾑ開始時決定・一部EV発生条件)】
//
//【SWITCHguideSeal・ｶﾞｲﾄﾞﾎﾟｽﾄ封印EV(1発動)】
//【SWITCHguideRoute・ｶﾞｲﾄﾞﾎﾟｽﾄ進行ﾙｰﾄを記憶(21OR27)】
//【SWITCHruin・ｶﾞｲﾄﾞﾎﾟｽﾄ&ICRF EVﾄﾘｶﾞｰ(1起動)】
//【SWITCHruinCount・上記EV進行ｶｳﾝﾄ(0~発動TURN・EVの度加算)】
//【SWITCHnewWorld・崩壊EV(1発生)】
//【SWITCHicrfErase・崩壊EVでのICRF滅亡(1実行済)】
//【SWITCHgroupMutate・崩壊EVでのgroup変容(1実行済)】
//【SWITCHchoiceNewGuide・ｶﾞｲﾄﾞ編新主人公選択(1ｺｳ2ﾋｶﾘ)】
//【SWITCHguideLost・反ｶﾞｲﾄﾞ時ｶﾞｲﾄﾞ撤退(1発動)】
//【SWITCHantiguideLost・ｶﾞｲﾄﾞ時反ｶﾞｲﾄﾞ撤退(1発動)】
//▼SAVEあり文字変数▼〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//【@keyPower・プレイヤー選択勢力(滅亡時GAMEOVER)】【@keyUnit・必須ユニット(不在時GAMEOVER)】
//【@belongingToPower_?・ユニット別所属勢力データ】
//【@allReinforcePower・全強化勢力】【@allHighReinforcePower・全超強化勢力】
//【@allInvisibleSpot・全非表示領地】【@allRoamSpot・全放浪可能領地】
//【@allAutoClassChangeUnit・全プレイヤー時自動クラスチェンジユニット】
//【@allGimmickUnit・全内政用ギミックユニット】
//・『↓全系統別クラス↓』・
//【@guideLineage】【@armyLineage】【@machineLineage】【@studentLineage】【@spiritLineage】
//【@gokudouLineage】【@publicservantLineage】【@groupLineage】【@workerLineage】
//【@priestLineage】【@outlawLineage】
//【@tempworkerLineage】【@assassinLineage】【@vipLineage】【@revolutionaryLineage】【@zombieLineage】
//【@felLineage】
//▼共用変数一部メモ▼〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//【@unit・ユニット】【@leader・リーダー】【@member・部隊員】【@power・勢力】【@skill・スキル】
//【battleRank・戦闘Ｒａｎｋ】【economyRank・経済Ｒａｎｋ】
//【totalBattleRank・総戦闘Ｒａｎｋ】【totalEconomyRank・総経済Ｒａｎｋ】

//【@allUnit・全ユニット】【@allPower・全勢力】
//【@playerPower・プレイヤー所属勢力】【@allComPower・全ＣＰＵ勢力】【@・】【@・】
//【@playerUnit・プレイヤーユニット】【@allPlayerUnit・全干渉可能ユニット（※一般兵含む）】
//【@allAutoClassChangeUnit・全プレイヤー時自動クラスチェンジユニット】
//【@allPowerUnit・全勢力内ユニット（※一般兵含む）】【@allPowerLeader・全勢力内リーダー】
//【@allSpotLeader・全領地内リーダー】【@allMember・全部隊員】【@・】【@・】
//【@allBattleUnit・全戦闘参加ユニット】【@allBattlePower・全戦闘参加勢力】
//【@allRoamUnit・全放浪ユニット】【@politicsUnit・全内政ユニット】【@・】
//【@allSpot・全領地】【@allInvisibleSpot・全非表示領地】
//【@allPowerSpot・勢力全所持領地データ】【@・】
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓



//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//制作ガイド■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(ユニット追加時に必要な処理)▼▼★
//１ユニット構造体でユニットを製作(unit0での全base欄にも追加)
//２シナリオ構造体の放浪ユニットに追加（テストシナリオにも追加）
//３勢力所属ユニットならスポット構造体に追加
//４下記の共用ルーチン(privateData)(friendData)にて使用するため追加
//５システム初期設定(startCreation)内にて使用するため追加
//６システム内政(politics[unit])内にて使用するため追加
//７システム内政(politics[event])内にて使用するため追加※下部に二つ目の項目があるので注意。
//８detail構造体やvoice構造体等を設定して完了。
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓



//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//共用ルーチン■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(privateData)】多目的用個人データ)▼▼90~6400★
//▼▼【解説】・ユニット個人に設定されたデータを読み込んだり書き込んだりするのに使用する重要ルーチン。
//▼▼使用目的に合わせて数値変数(purpose)に値を前もって入力する必要がある。
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//▼▼≪用途１(purpose == 1)ユニットの在籍勢力の登録＆目標クラス思考の読み込み≫
//▼▼【解説】・在籍する勢力を個別文字変数(@belongingToPower_?)に入力して「保存」する。
//▼▼※呼び出し前「一時ユニット@unit」「一時勢力@power」に中身が必要。
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//▼▼≪用途２(purpose == 2)ユニット休暇復帰処理≫
//▼▼【解説】・用途１で設定した個別の所属勢力(@belongingToPower_?)を読み込み、
//▼▼一時共用変数の所属勢力(@belongingToPower)へ入力。
//▼▼【routine(sleepComeback)】の起動準備をさせる。
//▼▼※呼び出し前「一時ユニット@unit」に中身が必要。
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//▼▼≪用途３(purpose == 3)部隊員数書き込み≫
//▼▼【解説】・(numberOfMember_?)へ部隊員数(numberOfMember)を一時的に保存しておく処理。
//▼▼戦闘前のシステムイベントで使用する。
//▼▼※呼び出し前「一時ユニット@unit」「部隊員数numberOfMember」に中身が必要。
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//▼▼≪用途４(purpose == 4)部隊員数読み込み≫
//▼▼【解説】・(numberOfMember_?)に登録された部隊員数を(numberOfMember)に戻す処理。
//▼▼戦闘後のシステムイベントで使用する。
//▼▼※呼び出し前「一時ユニット@unit」に中身が必要。また用途３を実行済でなければ意味なし。
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//▼▼≪用途５(purpose == 5)目標クラス思考登録≫
//▼▼【解説】・目標クラス思考を探して(@objectiveClass)に入力。
//▼▼(objectiveNumber)へ個別の目標番号を出力する役割も有り。
//▼▼※スキル「矜持」所持ユニットは空欄入力。clear(@objectiveClass)を発動前に必ず行うこと。
//▼▼※呼び出し前「一時ユニット@unit」「objective_???」に中身が必要。
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//▼▼≪用途６(purpose == 6)内政ユニット登録≫
//▼▼【解説】・対応する内政ユニットを(@politicsUnit)へ登録する。
//▼▼ユニット(@unit)がプレイヤー（ユニットOR勢力）時にのみ使用する。
//▼▼※呼び出し前「一時ユニット@unit」に中身が必要。
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//▼▼≪用途７(purpose == 7)初期クラス＆ＬＶ情報≫
//▼▼【解説】・内政でのクラスリセットに使用する。
//▼▼ゲーム開始時の初期クラス(@startClass)とレベル(startLv)を内蔵。
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
event privateData
{
	routine(PrivateData_kaihen)
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//ターン処理用アクションルーチン■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(eraseAction)】一部データリセット)▼▼★
//▼▼【解説】・消去フェイズに行う様々なリセット作業をここで行う。
//▼▼「クラスチェンジ候補者」「総Ｒａｎｋ」「固有能力発動者リスト」等の変数のリセット、
//▼▼及び一時能力スキルの除去等を実行。
event eraseAction
{
	set(totalBattleRank, 0)
	set(totalEconomyRank, 0)
	clear(@allClassChangeUnit)
	clear(@allSpClassChangeUnit)
	clear(@politicsUnit)
	clear(@allDoubleGetUnit)
	clear(@allLoyaltybufferGetUnit)
	clear(@allLoyaltykeepGetUnit)
	clear(@allLoyaltyupGetUnit)
	clear(@allHighloyaltyupGetUnit)
	clear(@allLoyaltydownGetUnit)
	clear(@allHighloyaltydownGetUnit)
	clear(@allLevelupGetUnit)
	clear(@allHighlevelupGetUnit)
	clear(@allAllaidGetUnit)
	clear(@allHighallaidGetUnit)
	clear(@allAllweakenGetUnit)
	clear(@allHighallweakenGetUnit)
	clear(@allMpatkmagaidGetUnit)
	clear(@allHighmpatkmagaidGetUnit)
	clear(@allHpdefmdfaidGetUnit)
	clear(@allHighhpdefmdfaidGetUnit)
	clear(@allHpmpaidGetUnit)
	clear(@allHighhpmpaidGetUnit)
	clear(@allAttackaidGetUnit)
	clear(@allHighattackaidGetUnit)
	clear(@allUltraattackaidGetUnit)
	clear(@allDefenseaidGetUnit)
	clear(@allHighdefenseaidGetUnit)
	clear(@allMagdefaidGetUnit)
	clear(@allHighmagdefaidGetUnit)
	clear(@allMoveaidGetUnit)
	clear(@allHighmoveaidGetUnit)
	clear(@allMedicineGetUnit)
	clear(@allHighmedicineGetUnit)
	clear(@allAssaultrifle_temporaryGetUnit)
	clear(@allGrenadegun_temporaryGetUnit)
	clear(@allTorpedo_temporaryGetUnit)
	clear(@allSniperrifle_temporaryGetUnit)
	clear(@allPoisonousdrug_temporaryGetUnit)
	clear(@allSparkcutter_temporaryGetUnit)
	clear(@allTemptationconf_temporaryGetUnit)
	clear(@allElectricritual_temporaryGetUnit)
	clear(@allMetamorphosistimeGetUnit)
	clear(@allArtupGetUnit)
	clear(@allHighartupGetUnit)
	set(SWITCHsearch, 0)
	set(SWITCHtraining, 0)
	set(SWITCHrevitalize, 0)
	set(SWITCHdifferentClassChange_machine, 0)
	set(SWITCHdifferentClassChange_worker, 0)
	set(SWITCHdifferentClassChange_assassin, 0)
	set(SWITCHkingvessel, 0)
	set(SWITCHallFurosikiUnit, 0)
	clear(@allActivePowerTactics)
	clear(@allPlayerSleepUnit)
	clear(@SearchUnit)
	eraseSkill(@allPowerUnit, double, loyaltybuffer, loyaltykeep, loyaltyup, highloyaltyup, loyaltydown, highloyaltydown, levelup, highlevelup, allaid, highallaid, allweaken, highallweaken, mpatkmagaid, highmpatkmagaid, hpdefmdfaid, highhpdefmdfaid, hpmpaid, highhpmpaid, attackaid, highattackaid, ultraattackaid, defenseaid, highdefenseaid, magdefaid, highmagdefaid, moveaid, highmoveaid, medicine, highmedicine, assaultrifle_temporary, grenadegun_temporary, torpedo_temporary, sniperrifle_temporary, poisonousdrug_temporary, sparkcutter_temporary, temptationconf_temporary, electricritual_temporary, artup, highartup)
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(traitAction)】固有能力発動)▼▼★
//▼▼【解説】・固有能力発動者リスト(@all??????Unit)に登録されている全ユニットの効果を発動。
//▼▼一時能力の付与等はここでは行わず予定者に登録するに留め、別routineにて実行する。
//▼▼ここで付与しないのは、一時能力をソートして表示するため。
//▼▼※呼び出し前、各固有能力発動者リスト(@all??????Unit)に中身が必要。
event traitAction
{
}
event traitskillevent_assistant
{
//[補佐]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※同領地内の最高ＬＶリーダーに一時スキル［固有能力倍化］を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	if (count(@allSpotLeader) == 1) {
		index(@allSpotLeader, 0, @unit2)
		pushLevel(@unit2, unitLevel2)
		set(unitLevel3, 0)
		set(unitLevel4, 0)
	}else if (count(@allSpotLeader) == 2) {
		index(@allSpotLeader, 0, @unit2)
		pushLevel(@unit2, unitLevel2)
		index(@allSpotLeader, 1, @unit3)
		pushLevel(@unit3, unitLevel3)
		set(unitLevel4, 0)
	}else if (count(@allSpotLeader) == 3) {
		index(@allSpotLeader, 0, @unit2)
		pushLevel(@unit2, unitLevel2)
		index(@allSpotLeader, 1, @unit3)
		pushLevel(@unit3, unitLevel3)
		index(@allSpotLeader, 2, @unit4)
		pushLevel(@unit4, unitLevel4)
	}
	if (unitLevel2 < unitLevel3 || unitLevel2 < unitLevel4) {
		subv(@allSpotLeader, @unit2)
	}
	if (unitLevel3 < unitLevel2 || unitLevel3 < unitLevel4) {
		subv(@allSpotLeader, @unit3)
	}
	if (unitLevel4 < unitLevel2 || unitLevel4 < unitLevel3) {
		subv(@allSpotLeader, @unit4)
	}
	if (count(@allSpotLeader) >= 1) {
		shuffle(@allSpotLeader)
		index(@allSpotLeader, 0, @targetUnit)
		addv(@allDoubleGetUnit, @targetUnit)
	}
	clear(@unit2)
	clear(@unit3)
	clear(@unit4)
}

event traitskillevent_rational
{
//[合理的思考(１)]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「固有能力倍化」を付与※____________________________________________________________________________________________________
	if (unitLevel >= 21 && rand() <= 49) {
		addv(@allDoubleGetUnit, @unit)
	}
}

event traitskillevent_sensualist_male
{
	set(sensualistsex,1)
	routine(traitskillevent_sensualist)
}

event traitskillevent_sensualist_female
{
	set(sensualistsex,2)
	routine(traitskillevent_sensualist)
}
event traitskillevent_sensualist
{
//[男好き＆女好き(１)]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「固有能力倍化」を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	while (count(@allSpotLeader) >= 1) {
		index(@allSpotLeader, 0, @targetUnit)
		subv(@allSpotLeader, @targetUnit)
		pushSex(@targetUnit, targetUnitSex)
		if (targetUnitSex != sensualistsex) {
			add(sensualistCount, 1)
		}
	}

	if (sensualistCount >= 2) {
		addv(@allSensualistUnit2, @unit)
	}else if (sensualistCount>= 3) {
		addv(@allDoubleGetUnit, @unit)
	}
	set(sensualistCount, 0)
}

event traitskillevent_twosides
{
//[二面性]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※「社交的」＆「慈愛」無効化※____________________________________________________________________________________________________
	if (unitLoyal <= 50) {
		subv(@allSociableUnit, @unit)
		subv(@allAffectionateUnit, @unit)
	}
}

event traitskillevent_loyalsubject_nini
{
	setv(@LoyalsubjectTarget,nini)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_honoka
{
	setv(@LoyalsubjectTarget,honoka)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_ouen
{
	setv(@LoyalsubjectTarget,ouen)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_kamiya
{
	setv(@LoyalsubjectTarget,kamiya)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_daiya
{
	setv(@LoyalsubjectTarget,daiya)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_himesiro
{
	setv(@LoyalsubjectTarget,himesiro)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_riferi
{
	setv(@LoyalsubjectTarget,riferi)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_rifon
{
	setv(@LoyalsubjectTarget,rifon)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_gaagoriusu
{
	setv(@LoyalsubjectTarget,gaagoriusu)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_suiren
{
	setv(@LoyalsubjectTarget,suiren)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_kizaki
{
	setv(@LoyalsubjectTarget,kizaki)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_veiral
{
	setv(@LoyalsubjectTarget,veiral)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_isikawa
{
	setv(@LoyalsubjectTarget,isikawa)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_ryudou
{
	setv(@LoyalsubjectTarget,ryudo)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject_fel
{
	setv(@LoyalsubjectTarget,fel)
	routine(traitskillevent_loyalsubject)
}

event traitskillevent_loyalsubject
{
//[忠臣(１)]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※条件を審査※____________________________________________________________________________________________________
	subv(@allSpotLeader, @unit)
	if (@LoyalsubjectTarget == @master || has(@allSpotLeader, @LoyalsubjectTarget) == 1) {
		addv(@allLoyalsubjectUnit2, @unit)
	}
}
event traitskillevent_educate
{
//[教育]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［ＬＶ上昇］を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	sub(unitLevel, 1)
	if (count(@allSpotLeader) == 0) {
		set(unitLevel2, 999)
		set(unitLevel3, 999)
		set(unitLevel4, 999)
	}else if (count(@allSpotLeader) == 1) {
		index(@allSpotLeader, 0, @unit2)
		pushLevel(@unit2, unitLevel2)
		set(unitLevel3, 999)
		set(unitLevel4, 999)
	}else if (count(@allSpotLeader) == 2) {
		index(@allSpotLeader, 0, @unit2)
		pushLevel(@unit2, unitLevel2)
		index(@allSpotLeader, 1, @unit3)
		pushLevel(@unit3, unitLevel3)
		set(unitLevel4, 999)
	}else if (count(@allSpotLeader) >= 3) {
		index(@allSpotLeader, 0, @unit2)
		pushLevel(@unit2, unitLevel2)
		index(@allSpotLeader, 1, @unit3)
		pushLevel(@unit3, unitLevel3)
		index(@allSpotLeader, 2, @unit4)
		pushLevel(@unit4, unitLevel4)
	}
	if (unitLevel2 > unitLevel || unitLevel2 > unitLevel3 || unitLevel2 > unitLevel4) {
		subv(@allSpotLeader, @unit2)
	}
	if (unitLevel3 > unitLevel || unitLevel3 > unitLevel2 || unitLevel3 > unitLevel4) {
		subv(@allSpotLeader, @unit3)
	}
	if (unitLevel4 > unitLevel || unitLevel4 > unitLevel2 || unitLevel4 > unitLevel3) {
		subv(@allSpotLeader, @unit4)
	}
	if (count(@allSpotLeader) >= 1) {
		shuffle(@allSpotLeader)
		index(@allSpotLeader, 0, @targetUnit)
		if (has(@allDoubleGetUnit, @unit) == 0) {
			addv(@allLevelupGetUnit, @targetUnit)
		}else if (has(@allDoubleGetUnit, @unit) == 1) {
			addv(@allHighlevelupGetUnit, @targetUnit)
		}
	}
	clear(@unit2)
	clear(@unit3)
	clear(@unit4)
}

event traitskillevent_innovation
{
//[改革]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［ＬＶ上昇］［忠誠低下］を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	while (count(@allSpotLeader) >= 1) {
		index(@allSpotLeader, 0, @targetUnit)
		subv(@allSpotLeader, @targetUnit)
		pushLevel(@targetUnit, targetLevel)
		if (has(@allDoubleGetUnit, @unit) == 0 && has(@allLoyalsubjectUnit2, @targetUnit) == 0 && unitLevel > targetLevel) {
			addv(@allLevelupGetUnit, @targetUnit)
			addv(@allLoyaltydownGetUnit, @targetUnit)
		}else if (has(@allDoubleGetUnit, @unit) == 1 && has(@allLoyalsubjectUnit2, @targetUnit) == 0 && unitLevel > targetLevel) {
			addv(@allHighlevelupGetUnit, @targetUnit)
			addv(@allHighloyaltydownGetUnit, @targetUnit)
		}
	}
}

event traitskillevent_treatment
{
//[医療]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［状態異常耐性上昇］を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}

	if (has(@allDoubleGetUnit, @unit) == 0) {
		addv(@allMedicineGetUnit, @allSpotLeader)
	}else if (has(@allDoubleGetUnit, @unit) == 1) {
		addv(@allHighmedicineGetUnit, @allSpotLeader)
	}
}

event traitskillevent_glibtalker
{
//[話術]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［忠誠低下抑制］を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	if (has(@allDoubleGetUnit, @unit) == 0 && has(@skill, sociable) == 1 && unitLevel >= 21) {
		addv(@allLoyaltybufferGetUnit, @allSpotLeader)
	}else if (has(@allDoubleGetUnit, @unit) == 1 && unitLevel >= 21) {
		addv(@allLoyaltykeepGetUnit, @allSpotLeader)
	}
}

event traitskillevent_invent
{
//[発明]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※経済ランクに２０加算※____________________________________________________________________________________________________
//※一時能力スキル［ＬＶ上昇］［全主要能力上昇］を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}

	set(requiredPoint, 19)
	if (has(@skill, double) == 0 && has(@skill, artistictaste) == 1) {
		set(requiredPoint, 39)
	}else if (has(@skill, double, artistictaste) == 1) {
		set(requiredPoint, 79)
	}
	pushRand(randPoint)
	if (has(@allDoubleGetUnit, @unit) == 0 && randPoint <= requiredPoint) {
		add(totalEconomyRank, 20)
		addv(@allLevelupGetUnit, @allSpotLeader)
		addv(@allAllaidGetUnit, @allSpotLeader)
	}else if (has(@allDoubleGetUnit, @unit) == 1 && randPoint <= requiredPoint) {
		add(totalEconomyRank, 40)
		addv(@allHighlevelupGetUnit, @allSpotLeader)
		addv(@allHighallaidGetUnit, @allSpotLeader)
	}
}

event traitskillevent_rich
{
//[大富豪]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※資金増加[固定量]※____________________________________________________________________________________________________
	set(richPoint, 0)
	if (getTurn() >= 1 && getTurn() <= 5) {
		add(richPoint, 2500)
	}else if (getTurn() >= 6 && getTurn() <= 10) {
		add(richPoint, 2000)
	}else if (getTurn() >= 11 && getTurn() <= 15) {
		add(richPoint, 1500)
	}else if (getTurn() >= 21 && getTurn() <= 25) {
		add(richPoint, 1000)
	}else if (getTurn() >= 26 && getTurn() <= 30) {
		add(richPoint, 500)
	}else {
		add(richPoint, 50)
	}
	if (has(@allDoubleGetUnit, @unit) == 1) {
		mul(richPoint, 2)
	}
	addMoney(@power, richPoint)
}

//[リクルーター]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※勢力戦略「別系統クラスチェンジ」発動条件※____________________________________________________________________________________________________
event traitskillevent_recruiter_machine
{
	set(SWITCHdifferentClassChange_machine, 1)
}

event traitskillevent_recruiter_worker
{
	set(SWITCHdifferentClassChange_worker, 1)
}

event traitskillevent_recruiter_assassin
{
	set(SWITCHdifferentClassChange_assassin, 1)
}

event traitskillevent_desiretoprotect
{
//[庇護欲]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［ＨＰ＆防御＆魔抵抗上昇］を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	while (count(@allSpotLeader) >= 1) {
		index(@allSpotLeader, 0, @targetUnit)
		subv(@allSpotLeader, @targetUnit)
		storeSkillOfUnit(@targetUnit, @targetUnitSkill)
		if (has(@targetUnitSkill, affectionate) == 1 || has(@targetUnitSkill, hardworker) == 1 || has(@targetUnitSkill, weakling) == 1) {
			if (has(@allDoubleGetUnit, @unit) == 0) {
				addv(@allHpdefmdfaidGetUnit, @targetUnit)
			}else if (has(@allDoubleGetUnit, @unit) == 1) {
				addv(@allHighhpdefmdfaidGetUnit, @targetUnit)
			}
		}
	}
}

event traitskillevent_sociable
{
//[社交的]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※追加のＲａｎｋ加算※____________________________________________________________________________________________________
	routine(classRank)
	routine(fluctuateRank)
	add(totalBattleRank, battleRank)
	add(totalEconomyRank, economyRank)
}

event traitskillevent_absolute
{
//[絶対者]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［忠誠低下無効］を付与※____________________________________________________________________________________________________
	storePowerOfForce(1, @topPower)
	if (isMaster(@unit) == 1 && @topPower == @power) {
		storeSpotOfUnit(@unit, @spot)
		storeLeaderOfSpot(@spot, @allSpotLeader)
		subv(@allSpotLeader, @allEccentricUnit)
		subv(@allSpotLeader, @unit)
		addv(@allLoyaltykeepGetUnit, @allSpotLeader)
	}
}

event traitskillevent_charismatic
{
//[カリスマ]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［全主要能力上昇］付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	while (count(@allSpotLeader) >= 1) {
		index(@allSpotLeader, 0, @targetUnit)
		subv(@allSpotLeader, @targetUnit)
		pushLevel(@targetUnit, targetUnitLevel)
		if (has(@allDoubleGetUnit, @unit) == 0 && unitLevel > targetUnitLevel) {
			addv(@allAllaidGetUnit, @targetUnit)
		}else if (has(@allDoubleGetUnit, @unit) == 1 && unitLevel > targetUnitLevel) {
			addv(@allHighallaidGetUnit, @targetUnit)
		}
	}
}
	
event traitskillevent_materialguard
{
//[対物理配備論]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「防御上昇」を付与※____________________________________________________________________________________________________
	set(SWITCHmaterialguardUnitActive, 1)
	while (count(@allSpotLeader) >= 1) {
		index(@allSpotLeader, 0, @targetUnit)
		subv(@allSpotLeader, @targetUnit)
		storeSkillOfUnit(@targetUnit, @targetUnitSkill)
		if (has(@targetUnitSkill, magicguard) == 1) {
			set(SWITCHmaterialguardUnitActive, 0)
		}
	}
	storeLeaderOfSpot(@spot, @allSpotLeader)
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}

	if (has(@allDoubleGetUnit, @unit) == 0 && SWITCHmaterialguardUnitActive == 1) {
		addv(@allDefenseaidGetUnit, @allSpotLeader)
	}else if (has(@allDoubleGetUnit, @unit) == 1 && SWITCHmaterialguardUnitActive == 1) {
		addv(@allHighdefenseaidGetUnit, @allSpotLeader)
	}
	set(SWITCHmaterialguardUnitActive, 0)
}
event traitskillevent_magicguard
{
//[対魔法配備論]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「魔抵抗上昇」を付与※____________________________________________________________________________________________________
	set(SWITCHmagicguardUnitActive, 1)
	while (count(@allSpotLeader) >= 1) {
		index(@allSpotLeader, 0, @targetUnit)
		subv(@allSpotLeader, @targetUnit)
		storeSkillOfUnit(@targetUnit, @targetUnitSkill)
		if (has(@targetUnitSkill, materialguard) == 1) {
			set(SWITCHmagicguardUnitActive, 0)
		}
	}
	storeLeaderOfSpot(@spot, @allSpotLeader)
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}

	if (has(@allDoubleGetUnit, @unit) == 0 && SWITCHmagicguardUnitActive == 1) {
		addv(@allMagdefaidGetUnit, @allSpotLeader)
	}else if (has(@allDoubleGetUnit, @unit) == 1 && SWITCHmagicguardUnitActive == 1) {
		addv(@allHighmagdefaidGetUnit, @allSpotLeader)
	}
	set(SWITCHmagicguardUnitActive, 0)
}

event traitskillevent_calm
{
//[冷静]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「忠誠低下抑制」を付与※____________________________________________________________________________________________________
	if (has(@allDoubleGetUnit, @unit) == 0) {
		addv(@allLoyaltybufferGetUnit, @unit)
	}else if (has(@allDoubleGetUnit, @unit) == 1) {
		addv(@allLoyaltykeepGetUnit, @unit)
	}
}
event traitskillevent_nuisance
{
//[厄介者]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「忠誠低下」を付与※____________________________________________________________________________________________________
//※一時能力スキル「攻撃上昇」を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	if (has(@allDoubleGetUnit, @unit) == 0) {
		addv(@allLoyaltydownGetUnit, @allSpotLeader)
		if (has(@skill, sadist) == 1) {
			addv(@allAttackaidGetUnit, @unit)
		}
	}else if (has(@allDoubleGetUnit, @unit) == 1) {
		addv(@allHighloyaltydownGetUnit, @allSpotLeader)
		if (has(@skill, sadist) == 1) {
			addv(@allHighattackaidGetUnit, @unit)
		}
	}
}

event traitskillevent_affectionate
{
//[慈愛]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「忠誠回復」を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}

	if (has(@allDoubleGetUnit, @unit) == 0) {
		addv(@allLoyaltyupGetUnit, @allSpotLeader)
	}else if (has(@allDoubleGetUnit, @unit) == 1) {
		addv(@allHighloyaltyupGetUnit, @allSpotLeader)
	}
}

event traitskillevent_coldblood
{
//[冷血]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「忠誠低下」を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	if (has(@allDoubleGetUnit, @unit) == 0) {
		addv(@allLoyaltydownGetUnit, @allSpotLeader)
	}else if (has(@allDoubleGetUnit, @unit) == 1) {
		addv(@allHighloyaltydownGetUnit, @allSpotLeader)
	}
}

event traitskillevent_moodyperson
{
//[気分屋]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力ランダム付与※____________________________________________________________________________________________________
	pushRand(rand)
	if (has(@allDoubleGetUnit, @unit) == 0) {
		if (rand <= 4) {
			addv(@allLoyaltybufferGetUnit, @unit)
		}else if (rand <= 9) {
			addv(@allLoyaltyupGetUnit, @unit)
		}else if (rand <= 14) {
			addv(@allLoyaltydownGetUnit, @unit)
		}else if (rand <= 19) {
			addv(@allLevelupGetUnit, @unit)
		}else if (rand <= 24) {
			addv(@allAllaidGetUnit, @unit)
		}else if (rand <= 29) {
			addv(@allAllweakenGetUnit, @unit)
		}else if (rand <= 34) {
			addv(@allMpatkmagaidGetUnit, @unit)
		}else if (rand <= 39) {
			addv(@allHpdefmdfaidGetUnit, @unit)
		}else if (rand <= 44) {
			addv(@allHpmpaidGetUnit, @unit)
		}else if (rand <= 49) {
			addv(@allAttackaidGetUnit, @unit)
		}else if (rand <= 54) {
			addv(@allDefenseaidGetUnit, @unit)
		}else if (rand <= 59) {
			addv(@allMagdefaidGetUnit, @unit)
		}else if (rand <= 64) {
			addv(@allMedicineGetUnit, @unit)
		}else if (rand <= 69) {
			addv(@allAssaultrifle_temporaryGetUnit, @unit)
		}else if (rand <= 74) {
			addv(@allGrenadegun_temporaryGetUnit, @unit)
		}else if (rand <= 79) {
			addv(@allTorpedo_temporaryGetUnit, @unit)
		}else if (rand <= 84) {
			addv(@allSniperrifle_temporaryGetUnit, @unit)
		}else if (rand <= 89) {
			addv(@allPoisonousdrug_temporaryGetUnit, @unit)
		}else if (rand <= 94) {
			addv(@allSparkcutter_temporaryGetUnit, @unit)
		}else {
			addv(@allTemptationconf_temporaryGetUnit, @unit)
		}
	}else if (has(@allDoubleGetUnit, @unit) == 1) {
		if (rand <= 4) {
			addv(@allLoyaltykeepGetUnit, @unit)
		}else if (rand <= 9) {
			addv(@allHighloyaltyupGetUnit, @unit)
		}else if (rand <= 14) {
			addv(@allHighloyaltydownGetUnit, @unit)
		}else if (rand <= 19) {
			addv(@allHighlevelupGetUnit, @unit)
		}else if (rand <= 24) {
			addv(@allHighallaidGetUnit, @unit)
		}else if (rand <= 29) {
			addv(@allHighallweakenGetUnit, @unit)
		}else if (rand <= 34) {
			addv(@allHighmpatkmagaidGetUnit, @unit)
		}else if (rand <= 39) {
			addv(@allHighhpdefmdfaidGetUnit, @unit)
		}else if (rand <= 44) {
			addv(@allHighhpmpaidGetUnit, @unit)
		}else if (rand <= 49) {
			addv(@allHighattackaidGetUnit, @unit)
		}else if (rand <= 54) {
			addv(@allHighdefenseaidGetUnit, @unit)
		}else if (rand <= 59) {
			addv(@allHighmagdefaidGetUnit, @unit)
		}else if (rand <= 64) {
			addv(@allHighmedicineGetUnit, @unit)
		}else if (rand <= 69) {
			addv(@allAssaultrifle_temporaryGetUnit, @unit)
		}else if (rand <= 74) {
			addv(@allGrenadegun_temporaryGetUnit, @unit)
		}else if (rand <= 79) {
			addv(@allTorpedo_temporaryGetUnit, @unit)
		}else if (rand <= 84) {
			addv(@allSniperrifle_temporaryGetUnit, @unit)
		}else if (rand <= 89) {
			addv(@allPoisonousdrug_temporaryGetUnit, @unit)
		}else if (rand <= 94) {
			addv(@allSparkcutter_temporaryGetUnit, @unit)
		}else {
			addv(@allTemptationconf_temporaryGetUnit, @unit)
		}
	}
}

event traitskillevent_madness
{
//[狂気]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［ＬＶ上昇］を付与※____________________________________________________________________________________________________
	if (has(@skill, loyalsubject_nini) == 1 || has(@skill, loyalsubject_honoka) == 1 || has(@skill, loyalsubject_ouen) == 1 || has(@skill, loyalsubject_kamiya) == 1 || has(@skill, loyalsubject_daiya) == 1 || has(@skill, loyalsubject_himesiro) == 1 || has(@skill, loyalsubject_riferi) == 1 || has(@skill, loyalsubject_rifon) == 1 || has(@skill, loyalsubject_gaagoriusu) == 1 || has(@skill, loyalsubject_suiren) == 1 || has(@skill, loyalsubject_kizaki) == 1 || has(@skill, loyalsubject_veiraru) == 1 || has(@skill, loyalsubject_isikawa) == 1 || has(@skill, loyalsubject_ryudou) == 1 || has(@skill, loyalsubject_fel) == 1 || has(@skill, warlike) == 1 || has(@skill, hardworker) == 1) {
		if (has(@allDoubleGetUnit, @unit) == 0) {
			addv(@allLevelupGetUnit, @unit)
		}else if (has(@allDoubleGetUnit, @unit) == 1) {
			addv(@allHighlevelupGetUnit, @unit)
		}
	}
}

event traitskillevent_serious
{
//[生真面目]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「全主要能力上昇」を付与※____________________________________________________________________________________________________
//※一時能力スキル「全主要能力低下」を付与※____________________________________________________________________________________________________
	if (unitLoyal >= 100) {
		if (has(@allDoubleGetUnit, @unit) == 0) {
			addv(@allAllaidGetUnit, @unit)
		}else if (has(@allDoubleGetUnit, @unit) == 1) {
			addv(@allHighallaidGetUnit, @unit)
		}
	}else if (unitLoyal <= 30) {
		if (has(@allDoubleGetUnit, @unit) == 0) {
			addv(@allAllweakenGetUnit, @unit)
		}else if (has(@allDoubleGetUnit, @unit) == 1) {
			addv(@allHighallweakenGetUnit, @unit)
		}
	}
}

event traitskillevent_hardworker
{
//[努力家]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［ＬＶ上昇］を付与※____________________________________________________________________________________________________
	if (rand() <= 49) {
		if (has(@allDoubleGetUnit, @unit) == 0) {
			addv(@allLevelupGetUnit, @unit)
		}else if (has(@allDoubleGetUnit, @unit) == 1) {
			addv(@allHighlevelupGetUnit, @unit)
		}
	}
}

event traitskillevent_moodmaker
{
//[ムードメーカー]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「忠誠低下抑制」を付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	if (has(@allDoubleGetUnit, @unit) == 0) {
		addv(@allLoyaltybufferGetUnit, @allSpotLeader)
	}else if (has(@allDoubleGetUnit, @unit) == 1) {
		addv(@allLoyaltykeepGetUnit, @allSpotLeader)
	}
}

	
event traitskillevent_picky
{
//[矜持]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［全主要能力上昇］付与※____________________________________________________________________________________________________
	if (has(@allDoubleGetUnit, @unit) == 0) {
		addv(@allAllaidGetUnit, @unit)
	}else if (has(@allDoubleGetUnit, @unit) == 1) {
		addv(@allHighallaidGetUnit, @unit)
	}
}

event traitskillevent_sadist
{
//[サディスト]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［ＭＰ＆攻撃＆魔力上昇］付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	set(SWITCHSadistActive, 0)
	while (count(@allSpotLeader) >= 1) {
		index(@allSpotLeader, 0, @targetUnit)
		subv(@allSpotLeader, @targetUnit)
		storeSkillOfUnit(@targetUnit, @targetUnitSkill)
		if (has(@targetUnitSkill, masochist) == 1) {
			set(SWITCHSadistActive, 1)
		}
	}
	if (has(@allDoubleGetUnit, @unit) == 0 && SWITCHSadistActive == 1) {
		addv(@allMpatkmagaidGetUnit, @unit)
	}else if (has(@allDoubleGetUnit, @unit) == 1 && SWITCHSadistActive == 1) {
		addv(@allHighmpatkmagaidGetUnit, @unit)
	}
	set(SWITCHSadistActive, 0)
}

event traitskillevent_masohist
{
//[マゾヒスト]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［ＨＰ＆防御＆魔抵抗上昇］付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @allEccentricUnit)
	subv(@allSpotLeader, @unit)

	set(SWITCHmasochistActive, 0)
	while (count(@allSpotLeader) >= 1) {
		index(@allSpotLeader, 0, @targetUnit)
		subv(@allSpotLeader, @targetUnit)
		storeSkillOfUnit(@targetUnit, @targetUnitSkill)
		if (has(@targetUnitSkill, sadist) == 1) {
			set(SWITCHmasochistActive, 1)
		}
	}
	if (has(@allDoubleGetUnit, @unit) == 0 && SWITCHmasochistActive == 1) {
		addv(@allHpdefmdfaidGetUnit, @unit)
	}else if (has(@allDoubleGetUnit, @unit) == 1 && SWITCHmasochistActive == 1) {
		addv(@allHighhpdefmdfaidGetUnit, @unit)
	}
	set(SWITCHmasochistActive, 0)
}

event traitskillevent_wishclass_artist
{
	setv(@wishclasstarget,artist)
	routine(traitskillevent_wishclass)
}

event traitskillevent_wishclass_shotputter
{
	setv(@wishclasstarget,shotputter)
	routine(traitskillevent_wishclass)
}

event traitskillevent_wishclass_ninga
{
	setv(@wishclasstarget,ninga)
	routine(traitskillevent_wishclass)
}

event traitskillevent_wishclass_bakuto
{
	setv(@wishclasstarget,bakuto)
	routine(traitskillevent_wishclass)
}

event traitskillevent_wishclass_mizusyoubaim
{
	setv(@wishclasstarget,mizusyoubaim)
	routine(traitskillevent_wishclass)
}

event traitskillevent_wishclass_bike
{
	setv(@wishclasstarget,bike)
	routine(traitskillevent_wishclass)
}

event traitskillevent_wishclass_thief
{
	setv(@wishclasstarget,thief)
	routine(traitskillevent_wishclass)
}

event traitskillevent_wishclass_dealer
{
	setv(@wishclasstarget,dealer)
	routine(traitskillevent_wishclass)
}

event traitskillevent_wishclass
{
//[希望職]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「忠誠回復」を付与※____________________________________________________________________________________________________
	set(SWITCHwishclassActive, 0)
	storeBaseClassOfUnit(@unit, @class)

	if (@class==@wishclasstarget) {
		set(SWITCHwishclassActive, 1)
	}
	
	if (SWITCHwishclassActive == 1) {
		if (@wishclasstarget==artist) {
			if (has(@allDoubleGetUnit, @unit) == 0 && @wishclasstarget==artist) {
				addv(@allLoyaltyupGetUnit, @unit)
				addv(@allArtupGetUnit, @unit)
			}else if (has(@allDoubleGetUnit, @unit) == 1 && @wishclasstarget==artist) {
				addv(@allHighloyaltyupGetUnit, @unit)
				addv(@allHighartupGetUnit, @unit)
			}
		}else if (@wishclasstarget==shotputter) {
			else if (has(@allDoubleGetUnit, @unit) == 0 && SWITCHwishclassActive == 3) {
				addv(@allLoyaltyupGetUnit, @unit)
				addv(@allMoveaidGetUnit, @unit)
			}else if (has(@allDoubleGetUnit, @unit) == 1 && SWITCHwishclassActive == 3) {
				addv(@allHighloyaltyupGetUnit, @unit)
				addv(@allHighmoveaidGetUnit, @unit)
			}
		}else {
			if (has(@allDoubleGetUnit, @unit) == 0) {
				addv(@allLoyaltyupGetUnit, @unit)
			}else if (has(@allDoubleGetUnit, @unit) == 1) {
				addv(@allHighloyaltyupGetUnit, @unit)
			}
		}
	}
	set(SWITCHwishclassActive, 0)
}

//[武装共有]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［(※攻撃スキル)］付与____________________________________________________________________________________________________
event traitskillevent_skillshare_assaultrifle
{
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}
	subv(@allSkillshareUnit_assaultrifle, @unit)
	addv(@allAssaultrifle_temporaryGetUnit, @allSpotLeader)
}

event traitskillevent_skillshare_grenadegun
{
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}
	subv(@allSkillshareUnit_grenadegun, @unit)
	addv(@allgrenadegun_temporaryGetUnit, @allSpotLeader)
}

event traitskillevent_skillshare_torepedo
{
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}
	subv(@allSkillshareUnit_torepedo, @unit)
	addv(@alltorepedo_temporaryGetUnit, @allSpotLeader)
}

event traitskillevent_skillshare_sniperrifle
{
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}
	subv(@allSkillshareUnit_sniperrifle, @unit)
	addv(@allsniperrifle_temporaryGetUnit, @allSpotLeader)
}

event traitskillevent_skillshare_poisonousdrug
{
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}
	subv(@allSkillshareUnit_poisonousdrug, @unit)
	addv(@allpoisonousdrug_temporaryGetUnit, @allSpotLeader)
}

event traitskillevent_skillshare_sparkcutter
{
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}
	subv(@allSkillshareUnit_sparkcutter, @unit)
	addv(@allsparkcutter_temporaryGetUnit, @allSpotLeader)
}

event traitskillevent_skillshare_temptationconf
{
	subv(@allSpotLeader, @allEccentricUnit)
	if (has(@allSpotLeader, @unit) == 0) {
		addv(@allSpotLeader, @unit)
	}
	subv(@allSkillshareUnit_temptationconf, @unit)
	addv(@alltemptationconf_temporaryGetUnit, @allSpotLeader)
}

event traitskillevent_slowstarter
{
//[大器晩成(１)]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［全主要能力上昇］付与※____________________________________________________________________________________________________
	if (has(@allDoubleGetUnit, @unit) == 0 && unitLevel >= 21) {
		addv(@allAllaidGetUnit, @unit)
		addv(@allSlowstarterUnit2, @unit)
	}else if (has(@allDoubleGetUnit, @unit) == 1 && unitLevel >= 21) {
		addv(@allHighallaidGetUnit, @unit)
		addv(@allSlowstarterUnit2, @unit)
	}
}

event traitskillevent_weakling
{
//[貧弱]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［全主要能力低下］付与※____________________________________________________________________________________________________
	if (has(@allDoubleGetUnit, @unit) == 0) {
		addv(@allAllweakenGetUnit, @unit)
	}else if (has(@allDoubleGetUnit, @unit) == 1) {
		addv(@allHighallweakenGetUnit, @unit)
	}
}

event traitskillevent_metamorphosis
{
//[変身]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※強制クラスチェンジ※____________________________________________________________________________________________________
//※一時能力スキル［変身中］付与※____________________________________________________________________________________________________
	subv(@allSpotLeader, @unit)

	if (count(@allSpotLeader) == 0) {
		if (has(@skill, metamorphosistime10) == 0 && has(@skill, metamorphosistime9) == 0 && has(@skill, metamorphosistime8) == 0 && has(@skill, metamorphosistime7) == 0 && has(@skill, metamorphosistime6) == 0 && has(@skill, metamorphosistime5) == 0 && has(@skill, metamorphosistime4) == 0 && has(@skill, metamorphosistime3) == 0 && has(@skill, metamorphosistime2) == 0 && has(@skill, metamorphosistime1) == 0) {
			storeBaseClassOfUnit(@unit, @class)
			setv(@metamorphosisBeforeClass, @class)
			setud(SAVEmetamorphosisBeforeClass, @metamorphosisBeforeClass)
			changeClass(@unit, hero)
			pushLevel(@unit, level)
			setLevel(@unit, 1)
			sub(level, 1)
			addLevel(@unit, level)
			if (level == 0) {
				addLevel(@unit, 1)
				setLevel(@unit, 1)
			}
			storeMemberOfUnit(@unit, @allMember)
			storeAllTalent(@allTalent)
			subv(@allMember, @allTalent)
			while (count(@allMember) >= 1) {
				index(@allMember, 0, @member)
				subv(@allMember, @member)
				changeClass(@member, hero)
				pushLevel(@member, level)
				setLevel(@member, 1)
				sub(level, 1)
				addLevel(@member, level)
				if (level == 0) {
					addLevel(@member, 1)
					setLevel(@member, 1)
				}
			}
			addv(@allMetamorphosistimeGetUnit, @unit)
		}
	}
}

event traitskillevent_uniquemagic
{
//[専用魔法]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［エレクトリック・リチュアル］付与____________________________________________________________________________________________________
	addv(@allElectricritual_temporaryGetUnit, @unit)
}

//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(traitGetSkillAction)】一時能力習得)▼▼★
//▼▼【解説】・全一時能力取得予定者(@all??????GetUnit)に能力を付与。
//▼▼「倍化済」「通常」「低下」「超低下」の順で付与させることで疑似的なソートを実行する。
event traitGetSkillAction
{
	addSkill(@allLoyaltykeepGetUnit, loyaltykeep)
	addSkill(@allHighloyaltyupGetUnit, highloyaltyup)
	addSkill(@allHighlevelupGetUnit, highlevelup)
	addSkill(@allHighallaidGetUnit, highallaid)
	addSkill(@allHighmpatkmagaidGetUnit, highmpatkmagaid)
	addSkill(@allHighhpdefmdfaidGetUnit, highhpdefmdfaid)
	addSkill(@allHighhpmpaidGetUnit, highhpmpaid)
	addSkill(@allUltraattackaidGetUnit, ultraattackaid)
	addSkill(@allHighattackaidGetUnit, highattackaid)
	addSkill(@allHighdefenseaidGetUnit, highdefenseaid)
	addSkill(@allHighmagdefaidGetUnit, highmagdefaid)
	addSkill(@allHighmoveaidGetUnit, highmoveaid)
	addSkill(@allHighmedicineGetUnit, highmedicine)

	addSkill(@allDoubleGetUnit, double)
	addSkill(@allLoyaltybufferGetUnit, loyaltybuffer)
	addSkill(@allLoyaltyupGetUnit, loyaltyup)
	addSkill(@allLevelupGetUnit, levelup)
	addSkill(@allAllaidGetUnit, allaid)
	addSkill(@allMpatkmagaidGetUnit, mpatkmagaid)
	addSkill(@allHpdefmdfaidGetUnit, hpdefmdfaid)
	addSkill(@allHpmpaidGetUnit, hpmpaid)
	addSkill(@allAttackaidGetUnit, attackaid)
	addSkill(@allDefenseaidGetUnit, defenseaid)
	addSkill(@allMagdefaidGetUnit, magdefaid)
	addSkill(@allMoveaidGetUnit, moveaid)
	addSkill(@allMedicineGetUnit, medicine)
	addSkill(@allAssaultrifle_temporaryGetUnit, assaultrifle_temporary)
	addSkill(@allGrenadegun_temporaryGetUnit, grenadegun_temporary)
	addSkill(@allTorpedo_temporaryGetUnit, torpedo_temporary)
	addSkill(@allSniperrifle_temporaryGetUnit, sniperrifle_temporary)
	addSkill(@allPoisonousdrug_temporaryGetUnit, poisonousdrug_temporary)
	addSkill(@allSparkcutter_temporaryGetUnit, sparkcutter_temporary)
	addSkill(@allTemptationconf_temporaryGetUnit, temptationconf_temporary)
	addSkill(@allElectricritual_temporaryGetUnit, electricritual_temporary)
	addSkill(@allMetamorphosistimeGetUnit, metamorphosistime5)
	addSkill(@allArtupGetUnit, artup)
	addSkill(@allHighartupGetUnit, highartup)

	addSkill(@allLoyaltydownGetUnit, loyaltydown)
	addSkill(@allAllweakenGetUnit, allweaken)
	addSkill(@allHighloyaltydownGetUnit, highloyaltydown)
	addSkill(@allHighallweakenGetUnit, highallweaken)
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(traitTemporaryAction)】一時能力発動)▼▼★
//▼▼【解説】・忠誠上下やＬＶＵＰ系の効果を持った一時能力の効果をここで発動させる。
//▼▼一時能力の所持者を確認するため全一時能力取得予定者(@all??????GetUnit)を使用。
event traitTemporaryAction
{
//[忠誠回復]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
	while (count(@allLoyaltyupGetUnit) >= 1) {
		index(@allLoyaltyupGetUnit, 0, @unit)
		subv(@allLoyaltyupGetUnit, @unit)

		addLoyal(@unit, 10)
	}
	while (count(@allHighloyaltyupGetUnit) >= 1) {
		index(@allHighloyaltyupGetUnit, 0, @unit)
		subv(@allHighloyaltyupGetUnit, @unit)

		addLoyal(@unit, 20)
	}
//[忠誠低下]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
	while (count(@allLoyaltydownGetUnit) >= 1) {
		index(@allLoyaltydownGetUnit, 0, @unit)
		subv(@allLoyaltydownGetUnit, @unit)
		storeSkillOfUnit(@unit, @skill)

		if (has(@skill, loyaltybuffer) == 1 && isMaster(@unit) == 0) {
			addLoyal(@unit, -5)
		}else if (has(@skill, loyaltykeep) == 0 && isMaster(@unit) == 0) {
			addLoyal(@unit, -10)
		}

		if (has(@allPlayerPowerUnit, @unit) == 1 && getMode() <= 1) {
			addLoyal(@unit, 1000)
		}else if (isPlayer(@unit) == 1 && getMode() <= 1) {
			addLoyal(@unit, 1000)
		}
	}
	while (count(@allHighloyaltydownGetUnit) >= 1) {
		index(@allHighloyaltydownGetUnit, 0, @unit)
		subv(@allHighloyaltydownGetUnit, @unit)
		storeSkillOfUnit(@unit, @skill)

		if (has(@skill, loyaltybuffer) == 1 && isMaster(@unit) == 0) {
			addLoyal(@unit, -10)
		}else if (has(@skill, loyaltykeep) == 0 && isMaster(@unit) == 0) {
			addLoyal(@unit, -20)
		}

		if (has(@allPlayerPowerUnit, @unit) == 1 && getMode() <= 1) {
			addLoyal(@unit, 1000)
		}else if (isPlayer(@unit) == 1 && getMode() <= 1) {
			addLoyal(@unit, 1000)
		}
	}
//[ＬＶ上昇]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
	while (count(@allLevelupGetUnit) >= 1) {
		index(@allLevelupGetUnit, 0, @unit)
		subv(@allLevelupGetUnit, @unit)

		pushLevel(@unit, unitLevel)
		if (unitLevel < 31) {
			addLevel(@unit, 1)
		}
	}
	while (count(@allHighlevelupGetUnit) >= 1) {
		index(@allHighlevelupGetUnit, 0, @unit)
		subv(@allHighlevelupGetUnit, @unit)

		pushLevel(@unit, unitLevel)
		if (unitLevel < 31) {
			addLevel(@unit, 2)
			if (unitLevel > 31) {
				setLevel(@unit, 31)
			}
		}
	}
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(powerTacticsAction)】勢力戦略発動)▼▼★
//▼▼【解説】・勢力戦略の条件を確認して、満たしていればここで発動する。
//▼▼一部の固有能力発動者を条件確認として使用。
event powerTacticsAction
{
	storeud(SAVEallReinforcePower, @allReinforcePower)
	storeud(SAVEallHighReinforcePower, @allHighReinforcePower)
//[統制]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※各総Ｒａｎｋ５０％ＵＰ(最速発動のため、まずこれから起動する)※____________________________________________________________________________________________________
//※マスターがスキル「君主の資質」所持時発動※____________________________________________________________________________________________________
	storeSkillOfUnit(@master, @skill)
	if (has(@skill, kingvessel) == 1) {
		per(totalBattleRank, 150)
		per(totalEconomyRank, 150)
		set(SWITCHkingvessel, 1)
	}
//[人材探索]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一定確率で放浪人材一名を勢力に追加する基本勢力戦略※____________________________________________________________________________________________________
//※「T」特別条件なし「U」領地数５以上「V」領地数１０以上※____________________________________________________________________________________________________
//※「W」領地数２５以上「X」領地数４５以上「Y」領地数７０以上※____________________________________________________________________________________________________
//※…また強化勢力は２回、超強化勢力は３回これを実行出来る※____________________________________________________________________________________________________

	set(talentSearchActive, 0)
	if (countSpot(@power) <= 4) {
		set(SWITCHsearch, 1)
		set(requiredPoint, 20)
		set(talentSearchActive, 1)
	}else if (countSpot(@power) <= 9) {
		set(SWITCHsearch, 2)
		set(requiredPoint, 40)
		set(talentSearchActive, 1)
	}else if (countSpot(@power) <= 24) {
		set(SWITCHsearch, 3)
		set(requiredPoint, 55)
		set(talentSearchActive, 1)
	}else if (countSpot(@power) <= 44) {
		set(SWITCHsearch, 4)
		set(requiredPoint, 70)
		set(talentSearchActive, 1)
	}else if (countSpot(@power) <= 69) {
		set(SWITCHsearch, 5)
		set(requiredPoint, 85)
		set(talentSearchActive, 1)
	}else {
		set(SWITCHsearch, 6)
		set(requiredPoint, 100)
		set(talentSearchActive, 1)
	}
	if (has(@allReinforcePower, @power) == 1) {
		set(repeatPoint, 2)
	}else if (has(@allHighReinforcePower, @power) == 1) {
		set(repeatPoint, 3)
//msg(■【デバックメッセージ】■$超強化勢力「&power&」ターン開始)
	}else {
		set(repeatPoint, 1)
	}

	while (repeatPoint >= 1) {
// msg(■【デバックメッセージ】■人材探索起動$発動勢力「&power&」残回数&repeatPoint&)
		sub(repeatPoint, 1)
		pushRand(randPoint)
		if (isPlayerTurn() == 1 && searchType >= 1 && talentSearchActive == 1) {
			per(requiredPoint, 50)
			if (randPoint < requiredPoint) {
				set(lineageNumber, searchType)
				routine(lineageLoad)
				storeud(SAVEallRoamSpot, @allRoamSpot)
				storeRoamUnitOfSpot(@allRoamSpot, @allRoamUnit)
				clear(@allTargetUnit)
				while (count(@allRoamUnit) >= 1) {
					index(@allRoamUnit, 0, @roamUnit)
					subv(@allRoamUnit, @roamUnit)

					storeBaseClassOfUnit(@roamUnit, @class)
					if (has(@lineage, @class) == 1) {
						addv(@allTargetUnit, @roamUnit)
					}
				}
				if (count(@allTargetUnit) >= 1) {
					storeSpotOfPower(@power, @allPowerSpot)
					storeLeaderOfSpot(@allPowerSpot, @allPowerLeader)
					set(allSpotCapa, 0)
					while (count(@allPowerSpot) >= 1) {
						index(@allPowerSpot, 0, @spot)
						subv(@allPowerSpot, @spot)
						pushCapa(@spot, spotCapa)
						add(allSpotCapa, spotCapa)
					}
					if (allSpotCapa > count(@allPowerLeader)) {
						shuffle(@allTargetUnit)
						index(@allTargetUnit, 0, @unit)
						addUnit(@unit, @power)
						addv(@SearchUnit, @unit)
					}
				}
			}
			clear(@allTargetUnit)
		}else if (talentSearchActive == 1 && randPoint < requiredPoint) {
			storeud(SAVEallRoamSpot, @allRoamSpot)
			storeRoamUnitOfSpot(@allRoamSpot, @allRoamUnit)
			if (count(@allRoamUnit) >= 1) {
				storeSpotOfPower(@power, @allPowerSpot)
				storeLeaderOfSpot(@allPowerSpot, @allPowerLeader)
				set(allSpotCapa, 0)
				while (count(@allPowerSpot) >= 1) {
					index(@allPowerSpot, 0, @spot)
					subv(@allPowerSpot, @spot)
					pushCapa(@spot, spotCapa)
					add(allSpotCapa, spotCapa)
				}
				if (allSpotCapa > count(@allPowerLeader)) {
					shuffle(@allRoamUnit)
					index(@allRoamUnit, 0, @unit)
					addUnit(@unit, @power)
					addv(@SearchUnit, @unit)
// msg(■【デバックメッセージ】■人材探索実行$取得人材「&unit&」)
				}
			}
		}
	}
	set(talentSearchActive, 0)
//[大規模鍛錬]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※勢力内の一定ＬＶ以下リーダー全てを対象とし、ＬＶを１を上昇させる基本勢力戦略※____________________________________________________________________________________________________
//※「T」特別条件なし「U」戦Ｒ１０以上「V」戦Ｒ以上※____________________________________________________________________________________________________
//※「W」戦Ｒ以上「X」戦Ｒ以上「Y」戦Ｒ以上※数値設定中____________________________________________________________________________________________________
//※…なお強化勢力はＬＶ上昇量が３、超強化勢力は５に変更され一定タイミングで部下のＬＶ引き上げ※____________________________________________________________________________________________________
	storeLeaderOfPower(@power, @allTrainingLeader)
	if (totalBattleRank >= 0 && totalBattleRank <= 9) {
		set(SWITCHtraining, 1)
		set(limitLV, 6)
	}else if (totalBattleRank >= 10 && totalBattleRank <= 24) {
		set(SWITCHtraining, 2)
		set(limitLV, 11)
	}else if (totalBattleRank >= 25 && totalBattleRank <= 49) {
		set(SWITCHtraining, 3)
		set(limitLV, 16)
	}else if (totalBattleRank >= 50 && totalBattleRank <= 99) {
		set(SWITCHtraining, 4)
		set(limitLV, 21)
	}else if (totalBattleRank >= 100 && totalBattleRank <= 199) {
		set(SWITCHtraining, 5)
		set(limitLV, 26)
	}else if (totalBattleRank >= 200) {
		set(SWITCHtraining, 6)
		set(limitLV, 31)
	}
	while (count(@allTrainingLeader) >= 1) {
		index(@allTrainingLeader, 0, @unit)
		subv(@allTrainingLeader, @unit)
		pushLevel(@unit, level)
		set(talentTrainingActive, 0)
		if (SWITCHtraining >= 1 && SWITCHtraining <= 6 && level < limitLV) {
			set(talentTrainingActive, 1)
		}
		if (talentTrainingActive == 1) {
			if (has(@allReinforcePower, @power) == 1) {
				addLevel(@unit, 3)
				pushLevel(@unit, level)
				if (level >= limitLV) {
					setLevel(@unit, limitLV)
					addLevel(@unit, 1)
					setLevel(@unit, limitLV)
					storeMemberOfUnit(@unit, @allMember)
					storeAllTalent(@allTalent)
					subv(@allMember, @allTalent)
					while (count(@allMember) >= 1) {
						index(@allMember, 0, @member)
						subv(@allMember, @member)
						pushLevel(@member, level)
						if (level < limitLV) {
							setLevel(@member, limitLV)
							addLevel(@member, 1)
							setLevel(@member, limitLV)
						}
					}
				}
			}else if (has(@allHighReinforcePower, @power) == 1) {
// msg(■【デバックメッセージ】■人材鍛錬[超強化]発動$発動人材「&unit&」現ＬＶ&level&＿上限ＬＶ&limitLV&)
				addLevel(@unit, 5)
				pushLevel(@unit, level)
// msg(■【デバックメッセージ】■発動人材「&unit&」上昇後ＬＶ&level&＿上限ＬＶ&limitLV&)
				if (level >= limitLV) {
					setLevel(@unit, limitLV)
					addLevel(@unit, 1)
					setLevel(@unit, limitLV)
					storeMemberOfUnit(@unit, @allMember)
					storeAllTalent(@allTalent)
					subv(@allMember, @allTalent)
					while (count(@allMember) >= 1) {
						index(@allMember, 0, @member)
						subv(@allMember, @member)
						pushLevel(@member, level)
						if (level < limitLV) {
							setLevel(@member, limitLV)
							addLevel(@member, 1)
							setLevel(@member, limitLV)
						}
					}
				}
// msg(■【デバックメッセージ】■発動人材「&unit&」最終ＬＶ&level&＿上限ＬＶ&limitLV&)
			}else {
				addLevel(@unit, 1)
			}
		}
		set(talentTrainingActive, 0)
	}
//[経済活性化]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※勢力内の領地経済値を変動させる※____________________________________________________________________________________________________
//※「T」特別条件なし「U」経Ｒ１０以上「V」経Ｒ以上※____________________________________________________________________________________________________
//※「W」経Ｒ以上「X」経Ｒ以上「Y」経Ｒ以上※数値設定中____________________________________________________________________________________________________
	storeSpotOfPower(@power, @allRevitalizeSpot)
	if (totalEconomyRank >= 0 && totalEconomyRank <= 9) {
		setGain(@allRevitalizeSpot, 1150)
		set(SWITCHrevitalize, 1)
	}else if (totalEconomyRank >= 10 && totalEconomyRank <= 24) {
		setGain(@allRevitalizeSpot, 1300)
		set(SWITCHrevitalize, 2)
	}else if (totalEconomyRank >= 25 && totalEconomyRank <= 49) {
		setGain(@allRevitalizeSpot, 1450)
		set(SWITCHrevitalize, 3)
	}else if (totalEconomyRank >= 50 && totalEconomyRank <= 99) {
		setGain(@allRevitalizeSpot, 1600)
		set(SWITCHrevitalize, 4)
	}else if (totalEconomyRank >= 100 && totalEconomyRank <= 199) {
		setGain(@allRevitalizeSpot, 1750)
		set(SWITCHrevitalize, 5)
	}else if (totalEconomyRank >= 200) {
		setGain(@allRevitalizeSpot, 1900)
		set(SWITCHrevitalize, 6)
	}
//[他系統クラスチェンジ]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※特殊クラスチェンジ可能(ここでの処理は特になし)※____________________________________________________________________________________________________
//[信用低下]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※マスターの信用度が７０以上なら７０に固定される※____________________________________________________________________________________________________
//※「盗人」リーダーが８人以上存在で発動(なお２ターン目以降のみ発動)※____________________________________________________________________________________________________
	if (SWITCHallFurosikiUnit >= 8) {
		pushTrust(@master, trustPoint)
		if (trustPoint > 70 && getTurn() >= 2) {
			addTrust(@master, -1000)
			addTrust(@master, 70)
			pushTrust(@master, trustPoint)
		}
	}
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(powerTacticsAction_display)】ＰＴ専用・勢力戦略表示発動)▼▼★
//▼▼【解説】・プレイヤーターンのみ発動する効果で、内政領地へ勢力戦略用ユニットを消去後展開する。
//▼▼また下記の勢力内出来事の表示で使用する(全発動中勢力戦略@allActivePowerTactics)を登録。
//▼▼一部の固有能力発動者を条件確認として使用。
event powerTacticsAction_display
{
	storeUnitOfSpot(politics2, @allPoliticsUnit)
	eraseUnit(@allPoliticsUnit)
	if (SWITCHsearch == 1) {
		addUnit(a01search1, politics2)
		addv(@allActivePowerTactics, NAMEUNITsearch1)
	}else if (SWITCHsearch == 2) {
		addUnit(a01search2, politics2)
		addv(@allActivePowerTactics, NAMEUNITsearch2)
	}else if (SWITCHsearch == 3) {
		addUnit(a01search3, politics2)
		addv(@allActivePowerTactics, NAMEUNITsearch3)
	}else if (SWITCHsearch == 4) {
		addUnit(a01search4, politics2)
		addv(@allActivePowerTactics, NAMEUNITsearch4)
	}else if (SWITCHsearch == 5) {
		addUnit(a01search5, politics2)
		addv(@allActivePowerTactics, NAMEUNITsearch5)
	}else if (SWITCHsearch == 6) {
		addUnit(a01search6, politics2)
		addv(@allActivePowerTactics, NAMEUNITsearch6)
	}
	if (SWITCHtraining == 1) {
		addUnit(a02training1, politics2)
		addv(@allActivePowerTactics, NAMEUNITtraining1)
	}else if (SWITCHtraining == 2) {
		addUnit(a02training2, politics2)
		addv(@allActivePowerTactics, NAMEUNITtraining2)
	}else if (SWITCHtraining == 3) {
		addUnit(a02training3, politics2)
		addv(@allActivePowerTactics, NAMEUNITtraining3)
	}else if (SWITCHtraining == 4) {
		addUnit(a02training4, politics2)
		addv(@allActivePowerTactics, NAMEUNITtraining4)
	}else if (SWITCHtraining == 5) {
		addUnit(a02training5, politics2)
		addv(@allActivePowerTactics, NAMEUNITtraining5)
	}else if (SWITCHtraining == 6) {
		addUnit(a02training6, politics2)
		addv(@allActivePowerTactics, NAMEUNITtraining6)
	}
	if (SWITCHrevitalize == 1) {
		addUnit(a03revitalize1, politics2)
		addv(@allActivePowerTactics, NAMEUNITrevitalize1)
	}else if (SWITCHrevitalize == 2) {
		addUnit(a03revitalize2, politics2)
		addv(@allActivePowerTactics, NAMEUNITrevitalize2)
	}else if (SWITCHrevitalize == 3) {
		addUnit(a03revitalize3, politics2)
		addv(@allActivePowerTactics, NAMEUNITrevitalize3)
	}else if (SWITCHrevitalize == 4) {
		addUnit(a03revitalize4, politics2)
		addv(@allActivePowerTactics, NAMEUNITrevitalize4)
	}else if (SWITCHrevitalize == 5) {
		addUnit(a03revitalize5, politics2)
		addv(@allActivePowerTactics, NAMEUNITrevitalize5)
	}else if (SWITCHrevitalize == 6) {
		addUnit(a03revitalize6, politics2)
		addv(@allActivePowerTactics, NAMEUNITrevitalize6)
	}
	if (SWITCHdifferentClassChange_machine == 0) {
		addUnit(b01recruitOFFmachine, politics2)
	}else if (SWITCHdifferentClassChange_machine == 1) {
		addUnit(b01recruitONmachine, politics2)
		addv(@allActivePowerTactics, NAMEUNITrecruitONmachine)
	}
	if (SWITCHdifferentClassChange_worker == 0) {
		addUnit(b02recruitOFFworker, politics2)
	}else if (SWITCHdifferentClassChange_worker == 1) {
		addUnit(b02recruitONworker, politics2)
		addv(@allActivePowerTactics, NAMEUNITrecruitONworker)
	}
	if (SWITCHdifferentClassChange_assassin == 0) {
		addUnit(b03recruitOFFassassin, politics2)
	}else if (SWITCHdifferentClassChange_assassin == 1) {
		addUnit(b03recruitONassassin, politics2)
		addv(@allActivePowerTactics, NAMEUNITrecruitONassassin)
	}
	if (SWITCHkingvessel == 0) {
		addUnit(c01controlOFF, politics2)
	}else if (SWITCHkingvessel == 1) {
		addUnit(c01controlON, politics2)
		addv(@allActivePowerTactics, NAMEUNITcontrolON)
	}
	if (SWITCHallFurosikiUnit <= 7) {
		addUnit(h01discreditOFF, politics2)
	}else if (SWITCHallFurosikiUnit >= 8) {
		addUnit(h01discreditON, politics2)
		addv(@allActivePowerTactics, NAMEUNITdiscreditON)
	}
	if (getMode() == 0) {
		addUnit(z01easyModeON, politics2)
		addUnit(z02normalModeOFF, politics2)
		addUnit(z03hardModeOFF, politics2)
		addUnit(z04lunaModeOFF, politics2)
	}else if (getMode() == 1) {
		addUnit(z01easyModeOFF, politics2)
		addUnit(z02normalModeON, politics2)
		addUnit(z03hardModeOFF, politics2)
		addUnit(z04lunaModeOFF, politics2)
	}else if (getMode() == 2) {
		addUnit(z01easyModeOFF, politics2)
		addUnit(z02normalModeOFF, politics2)
		addUnit(z03hardModeON, politics2)
		addUnit(z04lunaModeOFF, politics2)
	}else if (getMode() == 3) {
		addUnit(z01easyModeOFF, politics2)
		addUnit(z02normalModeOFF, politics2)
		addUnit(z03hardModeOFF, politics2)
		addUnit(z04lunaModeON, politics2)
	}
	storeud(SAVEkeyPower, @keyPower)
	if (@keyPower == guide) {
		if (SWITCHchapterSUB01 == 1) {
			addUnit(z11SUBEVON1, politics2)
		}else {
			addUnit(z11SUBEVguideOFF1, politics2)
		}
		if (SWITCHchapterSUB02 == 1) {
			addUnit(z12SUBEVON2, politics2)
		}else {
			addUnit(z12SUBEVguideOFF2, politics2)
		}
	}else if (@keyPower == kizakigumi) {
		if (SWITCHchapterSUB01 == 1) {
			addUnit(z11SUBEVON1, politics2)
		}else {
			addUnit(z11SUBEVkizakigumiOFF1, politics2)
		}
		if (SWITCHchapterSUB02 == 1) {
			addUnit(z12SUBEVON2, politics2)
		}else {
			addUnit(z12SUBEVkizakigumiOFF2, politics2)
		}
		if (SWITCHchapterSUB03 == 1) {
			addUnit(z13SUBEVON3, politics2)
		}else {
			addUnit(z13SUBEVkizakigumiOFF3, politics2)
		}
		if (SWITCHchapterSUB04 == 1) {
			addUnit(z14SUBEVON4, politics2)
		}else {
			addUnit(z14SUBEVkizakigumiOFF4, politics2)
		}
	}
	addUnit(z99searchChange, politics2)
	if (isPlayer(eastpolice) == 1) {
		addUnit(z991eastpoliceAllianceDiscarded, politics2)
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(NoticeDisplayAction)】勢力内出来事の表示)▼▼★
//▼▼【解説】プレイヤーターン限定処理であり、プレイヤーに
//▼▼「発動勢力戦略」「休暇実行人材」「一定ＬＶ初超え人材(予定)」を知らせる。
event NoticeDisplayAction
{
	index(@allActivePowerTactics, 0, @activePowerTactics1)
	index(@allActivePowerTactics, 1, @activePowerTactics2)
	index(@allActivePowerTactics, 2, @activePowerTactics3)
	index(@allActivePowerTactics, 3, @activePowerTactics4)
	index(@allActivePowerTactics, 4, @activePowerTactics5)
	index(@allActivePowerTactics, 5, @activePowerTactics6)
	index(@allActivePowerTactics, 6, @activePowerTactics7)
	index(@allActivePowerTactics, 7, @activePowerTactics8)
	if (count(@allActivePowerTactics) == 1 && @SearchUnit == @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$……人材探索に失敗。)
	}else if (count(@allActivePowerTactics) == 2 && @SearchUnit == @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$……人材探索に失敗。$・勢力戦略「&activePowerTactics2&」発動中)
	}else if (count(@allActivePowerTactics) == 3 && @SearchUnit == @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$……人材探索に失敗。$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中)
	}else if (count(@allActivePowerTactics) == 4 && @SearchUnit == @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$……人材探索に失敗。$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中$・勢力戦略「&activePowerTactics4&」発動中)
	}else if (count(@allActivePowerTactics) == 5 && @SearchUnit == @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$……人材探索に失敗。$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中$・勢力戦略「&activePowerTactics4&」発動中$・勢力戦略「&activePowerTactics5&」発動中)
	}else if (count(@allActivePowerTactics) == 6 && @SearchUnit == @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$……人材探索に失敗。$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中$・勢力戦略「&activePowerTactics4&」発動中$・勢力戦略「&activePowerTactics5&」発動中$・勢力戦略「&activePowerTactics6&」発動中)
	}else if (count(@allActivePowerTactics) == 7 && @SearchUnit == @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$……人材探索に失敗。$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中$・勢力戦略「&activePowerTactics4&」発動中$・勢力戦略「&activePowerTactics5&」発動中$・勢力戦略「&activePowerTactics6&」発動中$・勢力戦略「&activePowerTactics7&」発動中)
	}else if (count(@allActivePowerTactics) >= 8 && @SearchUnit == @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$……人材探索に失敗。$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中$・勢力戦略「&activePowerTactics4&」発動中$・勢力戦略「&activePowerTactics5&」発動中$・勢力戦略「&activePowerTactics6&」発動中$・勢力戦略「&activePowerTactics7&」発動中$・勢力戦略「&activePowerTactics8&」発動中)
	}
	if (count(@allActivePowerTactics) == 1 && @SearchUnit != @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$人材探索に成功し『&SearchUnit&』を入手！)
	}else if (count(@allActivePowerTactics) == 2 && @SearchUnit != @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$人材探索に成功し『&SearchUnit&』を入手！$・勢力戦略「&activePowerTactics2&」発動中)
	}else if (count(@allActivePowerTactics) == 3 && @SearchUnit != @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$人材探索に成功し『&SearchUnit&』を入手！$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中)
	}else if (count(@allActivePowerTactics) == 4 && @SearchUnit != @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$人材探索に成功し『&SearchUnit&』を入手！$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中$・勢力戦略「&activePowerTactics4&」発動中)
	}else if (count(@allActivePowerTactics) == 5 && @SearchUnit != @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$人材探索に成功し『&SearchUnit&』を入手！$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中$・勢力戦略「&activePowerTactics4&」発動中$・勢力戦略「&activePowerTactics5&」発動中)
	}else if (count(@allActivePowerTactics) == 6 && @SearchUnit != @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$人材探索に成功し『&SearchUnit&』を入手！$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中$・勢力戦略「&activePowerTactics4&」発動中$・勢力戦略「&activePowerTactics5&」発動中$・勢力戦略「&activePowerTactics6&」発動中)
	}else if (count(@allActivePowerTactics) == 7 && @SearchUnit != @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$人材探索に成功し『&SearchUnit&』を入手！$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中$・勢力戦略「&activePowerTactics4&」発動中$・勢力戦略「&activePowerTactics5&」発動中$・勢力戦略「&activePowerTactics6&」発動中$・勢力戦略「&activePowerTactics7&」発動中)
	}else if (count(@allActivePowerTactics) >= 8 && @SearchUnit != @) {
		dialog(【発動中の勢力戦略一覧】$勢力戦略についての効果や詳細はメニューウィンドウにて確認出来ます。$$・勢力戦略「&activePowerTactics1&」発動中$人材探索に成功し『&SearchUnit&』を入手！$・勢力戦略「&activePowerTactics2&」発動中$・勢力戦略「&activePowerTactics3&」発動中$・勢力戦略「&activePowerTactics4&」発動中$・勢力戦略「&activePowerTactics5&」発動中$・勢力戦略「&activePowerTactics6&」発動中$・勢力戦略「&activePowerTactics7&」発動中$・勢力戦略「&activePowerTactics8&」発動中)
	}
	
	set(idx,0)
	set(sleepcountPSU,0)
	while (idx<8 && idx<count(@allPlayerSleepUnit)) {
		index(@allPlayerSleepUnit,idx, @playerSleepUnit)
		
		storeSkillOfUnit(@playerSleepUnit1, @PSUallskill)
		routine(sleepCountSetTool)
		set(idx2,idx)
		while (idx2>0) {
			//sleepcountPSUの1の位に一人目の残り休暇ターン、10の位に2人目、100の位に…と保存していく
			sub(idx2,1)
			mul(sleepcount,10)
		}
		add(sleepcountPSU,sleepcount)
		add(idx,1)
	}
	
	//ヴァーレンの数値変数は小数点以下が切り捨てられるので、上のようなゴミみたいな保存法でも
	//こんな感じで手軽に取り出せる
	set(sleepcountPSU1,sleepcountPSU)
	mod(sleepcountPSU1,10)
	set(sleepcountPSU2,sleepcountPSU)
	mod(sleepcountPSU2,100)
	div(sleepcountPSU2,10)
	set(sleepcountPSU3,sleepcountPSU)
	mod(sleepcountPSU3,1000)
	div(sleepcountPSU3,100)
	set(sleepcountPSU4,sleepcountPSU)
	mod(sleepcountPSU4,10000)
	div(sleepcountPSU4,1000)
	set(sleepcountPSU5,sleepcountPSU)
	mod(sleepcountPSU5,100000)
	div(sleepcountPSU5,10000)
	set(sleepcountPSU6,sleepcountPSU)
	mod(sleepcountPSU6,1000000)
	div(sleepcountPSU6,100000)
	set(sleepcountPSU7,sleepcountPSU)
	mod(sleepcountPSU7,10000000)
	div(sleepcountPSU7,1000000)
	set(sleepcountPSU7,sleepcountPSU)
	mod(sleepcountPSU2,100000000)
	div(sleepcountPSU2,10000000)

	if (count(@allPlayerSleepUnit) == 1) {
		dialog(【休暇中人材一覧】$忠誠が０になる等の理由で一時的に勢力を離れている人材の一覧です。$・「&playerSleepUnit1&」&sleepcountPSU1&ターン後復帰)
	}else if (count(@allPlayerSleepUnit) == 2) {
		dialog(【休暇中人材一覧】$忠誠が０になる等の理由で一時的に勢力を離れている人材の一覧です。$・「&playerSleepUnit1&」&sleepcountPSU1&ターン後復帰$・「&playerSleepUnit2&」&sleepcountPSU2&ターン後復帰)
	}else if (count(@allPlayerSleepUnit) == 3) {
		dialog(【休暇中人材一覧】$忠誠が０になる等の理由で一時的に勢力を離れている人材の一覧です。$・「&playerSleepUnit1&」&sleepcountPSU1&ターン後復帰$・「&playerSleepUnit2&」&sleepcountPSU2&ターン後復帰$・「&playerSleepUnit3&」&sleepcountPSU3&ターン後復帰)
	}else if (count(@allPlayerSleepUnit) == 4) {
		dialog(【休暇中人材一覧】$忠誠が０になる等の理由で一時的に勢力を離れている人材の一覧です。$・「&playerSleepUnit1&」&sleepcountPSU1&ターン後復帰$・「&playerSleepUnit2&」&sleepcountPSU2&ターン後復帰$・「&playerSleepUnit3&」&sleepcountPSU3&ターン後復帰$・「&playerSleepUnit4&」&sleepcountPSU4&ターン後復帰)
	}else if (count(@allPlayerSleepUnit) == 5) {
		dialog(【休暇中人材一覧】$忠誠が０になる等の理由で一時的に勢力を離れている人材の一覧です。$・「&playerSleepUnit1&」&sleepcountPSU1&ターン後復帰$・「&playerSleepUnit2&」&sleepcountPSU2&ターン後復帰$・「&playerSleepUnit3&」&sleepcountPSU3&ターン後復帰$・「&playerSleepUnit4&」&sleepcountPSU4&ターン後復帰$・「&playerSleepUnit5&」&sleepcountPSU5&ターン後復帰)
	}else if (count(@allPlayerSleepUnit) == 6) {
		dialog(【休暇中人材一覧】$忠誠が０になる等の理由で一時的に勢力を離れている人材の一覧です。$・「&playerSleepUnit1&」&sleepcountPSU1&ターン後復帰$・「&playerSleepUnit2&」&sleepcountPSU2&ターン後復帰$・「&playerSleepUnit3&」&sleepcountPSU3&ターン後復帰$・「&playerSleepUnit4&」&sleepcountPSU4&ターン後復帰$・「&playerSleepUnit5&」&sleepcountPSU5&ターン後復帰$・「&playerSleepUnit6&」&sleepcountPSU6&ターン後復帰)
	}else if (count(@allPlayerSleepUnit) == 7) {
		dialog(【休暇中人材一覧】$忠誠が０になる等の理由で一時的に勢力を離れている人材の一覧です。$・「&playerSleepUnit1&」&sleepcountPSU1&ターン後復帰$・「&playerSleepUnit2&」&sleepcountPSU2&ターン後復帰$・「&playerSleepUnit3&」&sleepcountPSU3&ターン後復帰$・「&playerSleepUnit4&」&sleepcountPSU4&ターン後復帰$・「&playerSleepUnit5&」&sleepcountPSU5&ターン後復帰$・「&playerSleepUnit6&」&sleepcountPSU6&ターン後復帰$・「&playerSleepUnit7&」&sleepcountPSU7&ターン後復帰)
	}else if (count(@allPlayerSleepUnit) == 8) {
		dialog(【休暇中人材一覧】$忠誠が０になる等の理由で一時的に勢力を離れている人材の一覧です。$・「&playerSleepUnit1&」&sleepcountPSU1&ターン後復帰$・「&playerSleepUnit2&」&sleepcountPSU2&ターン後復帰$・「&playerSleepUnit3&」&sleepcountPSU3&ターン後復帰$・「&playerSleepUnit4&」&sleepcountPSU4&ターン後復帰$・「&playerSleepUnit5&」&sleepcountPSU5&ターン後復帰$・「&playerSleepUnit6&」&sleepcountPSU6&ターン後復帰$・「&playerSleepUnit7&」&sleepcountPSU7&ターン後復帰$・「&playerSleepUnit8&」&sleepcountPSU8&ターン後復帰)
	}else if (count(@allPlayerSleepUnit) >= 9) {
		dialog(【休暇中人材一覧】$忠誠が０になる等の理由で一時的に勢力を離れている人材の一覧です。$・「&playerSleepUnit1&」&sleepcountPSU1&ターン後復帰$・「&playerSleepUnit2&」&sleepcountPSU2&ターン後復帰$・「&playerSleepUnit3&」&sleepcountPSU3&ターン後復帰$・「&playerSleepUnit4&」&sleepcountPSU4&ターン後復帰$・「&playerSleepUnit5&」&sleepcountPSU5&ターン後復帰$・「&playerSleepUnit6&」&sleepcountPSU6&ターン後復帰$・「&playerSleepUnit7&」&sleepcountPSU7&ターン後復帰$・「&playerSleepUnit8&」&sleepcountPSU8&ターン後復帰$ｅｔｃ．．．)
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(autoClassChangeAction)】オートクラスチェンジ実行)▼▼★
//▼▼【解説】・ＣＰＵターン及びプレイヤーターンのオートクラスチェンジＯＮ時に実行させる処理。
//▼▼発動時は個別ループ処理の中での起動となる（※そのため一ターンに何回も起動する）
//▼▼クラスチェンジ実行中ユニット(@unit)の二次審査を行い、ＯＫならばクラスチェンジさせる。
//▼▼(@objectiveClass)に中身が必要なため、前もって【routine(privateData)】の準備が必須。
event autoClassChangeAction
{
//ΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞ
//storeBaseClassOfUnit(@unit, @classTest)
//talk(fel, fel_tu.png, ［デバックメッセージ］クラスチェンジチェック中だよ。$&unit&　現クラス「&classTest&」$目標クラス「&objectiveClass&」)
//ΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞ
	pushLevel(@unit, level)
//中位☆____________________________________________________________________________________________________
	if (@objectiveClass == sage || @objectiveClass == patrician || @objectiveClass == artist || @objectiveClass == hinfantry || @objectiveClass == sniper || @objectiveClass == magicsoldier || @objectiveClass == nanashi002 || @objectiveClass == nanashi003 || @objectiveClass == nanashi004 || @objectiveClass == nanashi005 || @objectiveClass == nanashi006 || @objectiveClass == scouncil || @objectiveClass == shotputter || @objectiveClass == occultclub || @objectiveClass == biologyclub || @objectiveClass == kendoclub || @objectiveClass == cheerteam || @objectiveClass == swimmingclub || @objectiveClass == reslime || @objectiveClass == kibamusya || @objectiveClass == spteam || @objectiveClass == hakase || @objectiveClass == doctor || @objectiveClass == fireman || @objectiveClass == activist || @objectiveClass == bouncer || @objectiveClass == researcher || @objectiveClass == maid || @objectiveClass == cook || @objectiveClass == securityguard || @objectiveClass == carpenter || @objectiveClass == mizusyoubaim || @objectiveClass == mizusyoubaiw || @objectiveClass == monk || @objectiveClass == shaman || @objectiveClass == kenkaya || @objectiveClass == thief || @objectiveClass == assassin) {
		if (level >= 11) {
			set(classChangeActive, 1)
			set(lowestLevel, 11)
		}
//上位☆☆____________________________________________________________________________________________________
	}else if (@objectiveClass == chevalier || @objectiveClass == seer || @objectiveClass == tank || @objectiveClass == helicopter || @objectiveClass == battleship || @objectiveClass == nanashi007 || @objectiveClass == nanashi008 || @objectiveClass == salamanber || @objectiveClass == undine || @objectiveClass == sylph || @objectiveClass == gnome || @objectiveClass == oni || @objectiveClass == ninga || @objectiveClass == bakuto || @objectiveClass == guardarmor || @objectiveClass == patrolcar || @objectiveClass == intellectual || @objectiveClass == middlemanager || @objectiveClass == idol || @objectiveClass == athlete || @objectiveClass == highpriest || @objectiveClass == bike || @objectiveClass == dealer || @objectiveClass == revolutionary) {
		if (level >= 21) {
			set(classChangeActive, 1)
			set(lowestLevel, 21)
		}
//最上位☆☆☆____________________________________________________________________________________________________
	}else if (@objectiveClass == divine || @objectiveClass == nanashi009 || @objectiveClass == dragon || @objectiveClass == ayakasi || @objectiveClass == hero || @objectiveClass == armoredcar || @objectiveClass == charisma || @objectiveClass == elite || @objectiveClass == champion || @objectiveClass == yorishiro || @objectiveClass == bantyou || @objectiveClass == umbra || @objectiveClass == evil) {
		if (level >= 31) {
			set(classChangeActive, 1)
			set(lowestLevel, 31)
		}
	}

	if (classChangeActive == 1) {
		changeClass(@unit, @objectiveClass)
		pushLevel(@unit, level)
		setLevel(@unit, 1)
		sub(level, 1)
		addLevel(@unit, level)
		eraseSkill(@unit, energycard)

		storeMemberOfUnit(@unit, @allMember)
		while (count(@allMember) >= 1) {
			index(@allMember, 0, @member)
			subv(@allMember, @member)
			if (isTalent(@member) == 0) {
				changeClass(@member, @objectiveClass)
				pushLevel(@member, level)
				if (lowestLevel > level) {
					set(level, lowestLevel)
				}
				setLevel(@member, 1)
				sub(level, 1)
				addLevel(@member, level)
			}
		}
//ΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞ
//talk(fel, fel_tu.png, ［デバックメッセージ］クラスチェンジが発動したよ。$人材名「&unit&」ＬＶ「&level&」クラス「&objectiveClass&」)
//ΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞ
	}
	set(classChangeActive, 0)
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(autoSpClassChangeAction)】オート特殊クラスチェンジ実行)▼▼★
//▼▼【解説】・ＣＰＵターン及びプレイヤーターンのオートクラスチェンジＯＮ時に実行させる処理。
//▼▼特殊クラスチェンジ実行中ユニット(@unit)の二次審査を行い、ＯＫならば系統越えクラスチェンジ実行。
//▼▼実行済ユニットは(@spChangeUnit)へ登録。拒否ユニットは(@noSpChangeUnit)へ登録すること。
event autoSpClassChangeAction
{
	while (count(@allSpClassChangeUnit) >= 1) {
		index(@allSpClassChangeUnit, 0, @unit)
		subv(@allSpClassChangeUnit, @unit)
		clear(@objectiveClass)

//戦闘指揮力と経済技能力の数値化____________________________________________________________________________________________________
		storeSkillOfUnit(@unit, @skill)
		if (has(@skill, command_s_all) == 1 || has(@skill, command_s_dual) == 1 || has(@skill, command_s_protection) == 1) {
			set(commandSkillPoint, 4)
		}else if (has(@skill, command_a_highattack) == 1 || has(@skill, command_a_highdefense) == 1 || has(@skill, command_a_highmagic) == 1 || has(@skill, command_a_highmagdef) == 1 || has(@skill, command_a_highdext) == 1) {
			set(commandSkillPoint, 3)
		}else if (has(@skill, command_b_basic) == 1 || has(@skill, command_b_material) == 1 || has(@skill, command_b_sorcery) == 1) {
			set(commandSkillPoint, 2)
		}else if (has(@skill, command_c_attack) == 1 || has(@skill, command_c_defense) == 1 || has(@skill, command_c_magic) == 1 || has(@skill, command_c_magdef) == 1 || has(@skill, command_c_dext) == 1) {
			set(commandSkillPoint, 1)
		}else if (has(@skill, command_d_nothing) == 1) {
			set(commandSkillPoint, 0)
		}
		if (has(@skill, economy_s) == 1) {
			set(economySkillPoint, 4)
		}else if (has(@skill, economy_a) == 1) {
			set(economySkillPoint, 3)
		}else if (has(@skill, economy_b) == 1) {
			set(economySkillPoint, 2)
		}else if (has(@skill, economy_c) == 1) {
			set(economySkillPoint, 1)
		}else if (has(@skill, economy_d) == 1) {
			set(economySkillPoint, 0)
		}
		set(totalPoint, commandSkillPoint)
		add(totalPoint, economySkillPoint)
//マスターの基本クラス書き込み____________________________________________________________________________________________________
		set(spClassChangeActive, 0)
		storeBaseClassOfUnit(@master, @class)
		routine(allLineageLoad)
		if (has(@guideLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allMasterBasicClass, guidestaff)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allMasterBasicClass, butler)
			}else  {
				setv(@allMasterBasicClass, guidestaff)
				addv(@allMasterBasicClass, butler)
			}
			set(spClassChangeActive, 1)
		}else if (has(@armyLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allMasterBasicClass, army)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allMasterBasicClass, provisioner)
			}else  {
				setv(@allMasterBasicClass, army)
				addv(@allMasterBasicClass, provisioner)
			}
			set(spClassChangeActive, 1)
		}else if (has(@machineLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allMasterBasicClass, nanashi001)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allMasterBasicClass, nanashi000)
			}else  {
				setv(@allMasterBasicClass, nanashi001)
				addv(@allMasterBasicClass, nanashi000)
			}
			set(spClassChangeActive, 1)
		}else if (has(@studentLineage, @class) == 1) {
//			pushSex(@unit, unitSex)
//			if (unitSex == 1) {
//				setv(@allMasterBasicClass, studentm)
//			}else  {
//				setv(@allMasterBasicClass, studentf)
//			}
		}else if (has(@spiritLineage, @class) == 1) {
			setv(@allMasterBasicClass, slime)
			set(spClassChangeActive, 1)
		}else if (has(@gokudouLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allMasterBasicClass, toseinin)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allMasterBasicClass, tekiya)
			}else  {
				setv(@allMasterBasicClass, toseinin)
				addv(@allMasterBasicClass, tekiya)
			}
			set(spClassChangeActive, 1)
		}else if (has(@publicservantLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allMasterBasicClass, police)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allMasterBasicClass, teacher)
			}else  {
				setv(@allMasterBasicClass, police)
				addv(@allMasterBasicClass, teacher)
			}
			set(spClassChangeActive, 1)
		}else if (has(@groupLineage, @class) == 1) {
			setv(@allMasterBasicClass, member)
			set(spClassChangeActive, 1)
		}else if (has(@workerLineage, @class) == 1) {
			setv(@allMasterBasicClass, salaryman)
			set(spClassChangeActive, 1)
		}else if (has(@priestLineage, @class) == 1) {
			setv(@allMasterBasicClass, priest)
			set(spClassChangeActive, 1)
		}else if (has(@outlawLineage, @class) == 1) {
			setv(@allMasterBasicClass, tinpira)
			set(spClassChangeActive, 1)
		}else if (has(@tempworkerLineage, @class) == 1) {
		}else if (has(@assassinLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allMasterBasicClass, investigator)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allMasterBasicClass, spy)
			}else  {
				setv(@allMasterBasicClass, investigator)
				addv(@allMasterBasicClass, spy)
			}
			set(spClassChangeActive, 1)
		}else if (has(@vipLineage, @class) == 1) {
		}else if (has(@revolutionaryLineage, @class) == 1) {
			setv(@allMasterBasicClass, resistance)
			set(spClassChangeActive, 1)
		}else if (has(@zombieLineage, @class) == 1) {
		}else if (has(@felLineage, @class) == 1) {
		}
//勢力戦略による基本クラス書き込み____________________________________________________________________________________________________
		if (spClassChangeActive == 0 && SWITCHdifferentClassChange_machine == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allMasterBasicClass, nanashi001)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allMasterBasicClass, nanashi000)
			}else  {
				setv(@allMasterBasicClass, nanashi001)
				addv(@allMasterBasicClass, nanashi000)
			}
			set(spClassChangeActive, 1)
		}else if (spClassChangeActive == 0 && SWITCHdifferentClassChange_worker == 1) {
			setv(@allMasterBasicClass, salaryman)
			set(spClassChangeActive, 1)
		}else if (spClassChangeActive == 0 && SWITCHdifferentClassChange_assassin == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allMasterBasicClass, investigator)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allMasterBasicClass, spy)
			}else  {
				setv(@allMasterBasicClass, investigator)
				addv(@allMasterBasicClass, spy)
			}
			set(spClassChangeActive, 1)
		}
//非正規ユニット以外のクラスによるクラスチェンジ拒否____________________________________________________________________________________________________
		storeBaseClassOfUnit(@unit, @class)
		pushRand(randPoint)
		if (spClassChangeActive == 1 && has(@class, tempworkerm) == 0 && has(@class, tempworkerw) == 0 && randPoint >= 50) {
			storeud(SAVEnoSpChangeUnit, @noSpChangeUnit)
			addv(@noSpChangeUnit, @unit)
			setud(SAVEnoSpChangeUnit, @noSpChangeUnit)
			set(spClassChangeActive, 0)
		}
//実行処理____________________________________________________________________________________________________
		if (spClassChangeActive == 1) {
			shuffle(@allMasterBasicClass)
			index(@allMasterBasicClass, 0, @masterBasicClass)

			changeClass(@unit, @masterBasicClass)
			setLevel(@unit, 1)
			addLevel(@unit, 1)
			setLevel(@unit, 1)
			storeSkillOfUnit(@unit, @skill)
			if (has(@skill, energycard) == 0) {
				addSkill(@unit, energycard)
			}
			storeud(SAVEspChangeUnit, @spChangeUnit)
			addv(@spChangeUnit, @unit)
			setud(SAVEspChangeUnit, @spChangeUnit)
			routine(friendData)

			storeMemberOfUnit(@unit, @allMember)
			while (count(@allMember) >= 1) {
				index(@allMember, 0, @member)
				subv(@allMember, @member)
				if (isTalent(@member) == 0) {
					changeClass(@member, @masterBasicClass)
					setLevel(@member, 1)
					addLevel(@member, 1)
					setLevel(@member, 1)
				}
			}
		}
		set(spClassChangeActive, 0)
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//ターン処理用サブルーチン■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(sleepComeback)】ユニット復帰開始処理)▼▼★
//▼▼【解説】・ユニット復帰処理を実際に行うルーチン。
//▼▼現行勢力(@power)と所属勢力(@belongingToPower)が一致した場合のみ起動。
//▼▼スリープスキルの状態に応じて、スリープスキル変化か除去後復帰を行う。
event sleepComeback
{
//ΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞ
//talk(fel, fel_tu.png, ［デバックメッセージ］変数確認するよ。$人材名「&unit&」勢力「&power&」勢力「&belongingToPower&」)
//ΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞ
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
	if (@power == @belongingToPower) {
		storeSkillOfUnit(@unit, @skill)
		storeskillset(unitsleepingskillset,@skillset)
		set(idx,0)
		while (idx<7) {
			index(@skillset,idx,@sleepingskill)
			if (has(@skill,@sleepingskill) == 1) {
				eraseSkill(@unit,@sleepingskill)
				if (idx!=0) {
					sub(idx,1)
					index(@skillset,idx,@sleepingskill)
					addSkill(@unit,@sleepingskill)
				}
				else {
					storeSpotOfPower(@power, @allPowerSpot)
						storeLeaderOfSpot(@allPowerSpot, @allPowerLeader)
						set(allSpotCapa, 0)
						while (count(@allPowerSpot) >= 1) {
							index(@allPowerSpot, 0, @spot)
							subv(@allPowerSpot, @spot)
							pushCapa(@spot, spotCapa)
							add(allSpotCapa, spotCapa)
						}
						if (allSpotCapa > count(@allPowerLeader)) {
							eraseSkill(@unit, unitsleeping1)
							addUnit(@unit, @power)
							addLoyal(@unit, 100)
						}else if (allSpotCapa <= count(@allPowerLeader)) {
			// 			msg(［勢力内の領地が満員のため&unit&は休暇より復帰出来ませんでした。$引き続き休暇を継続します。］)
			//ΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞ
			// pushv(@allPowerLeader, allPowerLeaderTest)
			// talk(fel, fel_tu.png, ［デバックメッセージ］変数確認するよ。$人材名「&unit&」勢力「&power&」$全リーダー数「&allPowerLeaderTest&」全駐在可能数「&allSpotCapa&」)
			//ΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞ
						}
				}
			}
			add(idx,1)
		}
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(sleepRemoval)】ユニット休暇開始処理)▼▼★
//▼▼【解説】・非表示領地を変数に代入し、空いた領地を探して一時ユニットを移動させる。
//▼▼なお処理前に予め休憩スキルを付与しておく。
//▼▼※呼び出し前「一時ユニット@unit」に中身が必要。
event sleepRemoval
{
//ΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞ
//※※＜(デバック用)＞※※
//set(purpose, 1)
//routine(privateData2)
//choice(testChoice, 一時停止テスト用)
//talk(fel, fel_tu.png, ［デバックメッセージ］休暇処理が発動したよ。$人材名「&unit&」所属勢力名「&power&」)
//erase()
//ΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞΞ
	if (EVsleep == 0) {
		addSkill(@unit, unitsleeping7)
	}else if (EVsleep == 1) {
		addSkill(@unit, unitsleeping1)
	}
	storeskillset(invisiblespot,@skillset)
	set(idx,0)
	while (idx<20) {
		index(@skillset,idx,@invisibleSpot)
		storeleaderofspot(@invisibleSpot,@invisibleCapa)
		if (count(@invisibleCapa) <= 19) {
			addUnit(@unit,@invisibleSpot)
			break()
		}
		add(idx,1)
	}

// 	if (idx==20) {
// 		msg(［休憩中ユニットが多すぎるため&unit&は休暇出来ませんでした。$忠誠値が回復し、引き続き戦場に残存します］)
// 		addLoyal(@unit, 100)
// 		eraseSkill(@unit, unitsleeping7)
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(spObjectiveClassSet)】他系統クラスチェンジ者の目標クラス思考書き換え)▼▼★
//▼▼【解説】・一時ユニット(@unit)が
//▼▼特殊クラスチェンジにてクラスチェンジしたユニット(@spChangeUnit)である場合に実行。
//▼▼ここでプライベートデータから取得した「@objectiveClass」情報に上書き追加を行う。
//▼▼※呼び出し前「一時ユニット@unit」「一時目標クラス思考objectiveNumber」に中身が必要。
event spObjectiveClassSet
{
	storeud(SAVEspChangeUnit, @spChangeUnit)
	if (has(@spChangeUnit, @unit) == 1) {
		clear(@objectiveClass)
//戦闘指揮力と経済技能力の数値化____________________________________________________________________________________________________
		storeSkillOfUnit(@unit, @skill)
		if (has(@skill, command_s_all) == 1 || has(@skill, command_s_dual) == 1 || has(@skill, command_s_protection) == 1) {
			set(commandSkillPoint, 4)
		}else if (has(@skill, command_a_highattack) == 1 || has(@skill, command_a_highdefense) == 1 || has(@skill, command_a_highmagic) == 1 || has(@skill, command_a_highmagdef) == 1 || has(@skill, command_a_highdext) == 1) {
			set(commandSkillPoint, 3)
		}else if (has(@skill, command_b_basic) == 1 || has(@skill, command_b_material) == 1 || has(@skill, command_b_sorcery) == 1) {
			set(commandSkillPoint, 2)
		}else if (has(@skill, command_c_attack) == 1 || has(@skill, command_c_defense) == 1 || has(@skill, command_c_magic) == 1 || has(@skill, command_c_magdef) == 1 || has(@skill, command_c_dext) == 1) {
			set(commandSkillPoint, 1)
		}else if (has(@skill, command_d_nothing) == 1) {
			set(commandSkillPoint, 0)
		}
		if (has(@skill, economy_s) == 1) {
			set(economySkillPoint, 4)
		}else if (has(@skill, economy_a) == 1) {
			set(economySkillPoint, 3)
		}else if (has(@skill, economy_b) == 1) {
			set(economySkillPoint, 2)
		}else if (has(@skill, economy_c) == 1) {
			set(economySkillPoint, 1)
		}else if (has(@skill, economy_d) == 1) {
			set(economySkillPoint, 0)
		}
		set(totalPoint, commandSkillPoint)
		add(totalPoint, economySkillPoint)
//目標クラス思考書き換え____________________________________________________________________________________________________
		storeBaseClassOfUnit(@unit, @class)
		routine(allLineageLoad)
		if (has(@guideLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, sage)
				addv(@allObjectiveClass, sage)
				addv(@allObjectiveClass, sage)
				addv(@allObjectiveClass, chevalier)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, patrician)
				addv(@allObjectiveClass, patrician)
				addv(@allObjectiveClass, patrician)
				addv(@allObjectiveClass, seer)
			}else  {
				setv(@allObjectiveClass, sage)
				addv(@allObjectiveClass, patrician)
				addv(@allObjectiveClass, chevalier)
				addv(@allObjectiveClass, seer)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@armyLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, hinfantry)
				addv(@allObjectiveClass, hinfantry)
				addv(@allObjectiveClass, tank)
				addv(@allObjectiveClass, helicopter)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, battleship)
				addv(@allObjectiveClass, battleship)
				addv(@allObjectiveClass, battleship)
				addv(@allObjectiveClass, battleship)
			}else  {
				setv(@allObjectiveClass, hinfantry)
				addv(@allObjectiveClass, hinfantry)
				addv(@allObjectiveClass, tank)
				addv(@allObjectiveClass, battleship)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@machineLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, nanashi003)
				addv(@allObjectiveClass, nanashi003)
				addv(@allObjectiveClass, nanashi003)
				addv(@allObjectiveClass, nanashi008)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, nanashi006)
				addv(@allObjectiveClass, nanashi006)
				addv(@allObjectiveClass, nanashi006)
				addv(@allObjectiveClass, nanashi008)
			}else  {
				setv(@allObjectiveClass, nanashi002)
				addv(@allObjectiveClass, nanashi003)
				addv(@allObjectiveClass, nanashi003)
				addv(@allObjectiveClass, nanashi008)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@studentLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, shotputter)
				addv(@allObjectiveClass, kendoclub)
				addv(@allObjectiveClass, kendoclub)
				addv(@allObjectiveClass, swimmingclub)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, scouncil)
				addv(@allObjectiveClass, biologyclub)
				addv(@allObjectiveClass, cheerteam)
				addv(@allObjectiveClass, cheerteam)
			}else  {
				setv(@allObjectiveClass, scouncil)
				addv(@allObjectiveClass, scouncil)
				addv(@allObjectiveClass, occultclub)
				addv(@allObjectiveClass, cheerteam)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@spiritLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, reslime)
				addv(@allObjectiveClass, reslime)
				addv(@allObjectiveClass, salamanber)
				addv(@allObjectiveClass, salamanber)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, undine)
				addv(@allObjectiveClass, undine)
				addv(@allObjectiveClass, sylph)
				addv(@allObjectiveClass, sylph)
			}else  {
				setv(@allObjectiveClass, reslime)
				addv(@allObjectiveClass, salamanber)
				addv(@allObjectiveClass, undine)
				addv(@allObjectiveClass, sylph)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@gokudouLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, kibamusya)
				addv(@allObjectiveClass, kibamusya)
				addv(@allObjectiveClass, kibamusya)
				addv(@allObjectiveClass, oni)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, bakuto)
				addv(@allObjectiveClass, bakuto)
				addv(@allObjectiveClass, bakuto)
				addv(@allObjectiveClass, bakuto)
			}else  {
				setv(@allObjectiveClass, kibamusya)
				addv(@allObjectiveClass, kibamusya)
				addv(@allObjectiveClass, oni)
				addv(@allObjectiveClass, bakuto)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@publicservantLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, spteam)
				addv(@allObjectiveClass, spteam)
				addv(@allObjectiveClass, fireman)
				addv(@allObjectiveClass, guardarmor)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, hakase)
				addv(@allObjectiveClass, hakase)
				addv(@allObjectiveClass, hakase)
				addv(@allObjectiveClass, doctor)
			}else  {
				setv(@allObjectiveClass, spteam)
				addv(@allObjectiveClass, doctor)
				addv(@allObjectiveClass, fireman)
				addv(@allObjectiveClass, patrolcar)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@groupLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, activist)
				addv(@allObjectiveClass, activist)
				addv(@allObjectiveClass, bouncer)
				addv(@allObjectiveClass, bouncer)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, activist)
				addv(@allObjectiveClass, researcher)
				addv(@allObjectiveClass, researcher)
				addv(@allObjectiveClass, intellectual)
			}else  {
				setv(@allObjectiveClass, activist)
				addv(@allObjectiveClass, activist)
				addv(@allObjectiveClass, activist)
				addv(@allObjectiveClass, intellectual)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@workerLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, securityguard)
				addv(@allObjectiveClass, securityguard)
				addv(@allObjectiveClass, carpenter)
				addv(@allObjectiveClass, middlemanager)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, cook)
				addv(@allObjectiveClass, cook)
				addv(@allObjectiveClass, middlemanager)
				addv(@allObjectiveClass, idol)
			}else  {
				setv(@allObjectiveClass, cook)
				addv(@allObjectiveClass, securityguard)
				addv(@allObjectiveClass, carpenter)
				addv(@allObjectiveClass, middlemanager)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@priestLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, monk)
				addv(@allObjectiveClass, monk)
				addv(@allObjectiveClass, monk)
				addv(@allObjectiveClass, highpriest)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, shaman)
				addv(@allObjectiveClass, shaman)
				addv(@allObjectiveClass, shaman)
				addv(@allObjectiveClass, highpriest)
			}else  {
				setv(@allObjectiveClass, monk)
				addv(@allObjectiveClass, shaman)
				addv(@allObjectiveClass, highpriest)
				addv(@allObjectiveClass, highpriest)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@outlawLineage, @class) == 1) {
			if (totalPoint == 0 || commandSkillPoint > economySkillPoint) {
				setv(@allObjectiveClass, kenkaya)
				addv(@allObjectiveClass, kenkaya)
				addv(@allObjectiveClass, kenkaya)
				addv(@allObjectiveClass, bike)
			}else if (commandSkillPoint < economySkillPoint) {
				setv(@allObjectiveClass, thief)
				addv(@allObjectiveClass, thief)
				addv(@allObjectiveClass, thief)
				addv(@allObjectiveClass, dealer)
			}else  {
				setv(@allObjectiveClass, kenkaya)
				addv(@allObjectiveClass, thief)
				addv(@allObjectiveClass, bike)
				addv(@allObjectiveClass, dealer)
			}
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@tempworkerLineage, @class) == 1) {
		}else if (has(@assassinLineage, @class) == 1) {
			setv(@allObjectiveClass, assassin)
			addv(@allObjectiveClass, assassin)
			addv(@allObjectiveClass, assassin)
			addv(@allObjectiveClass, assassin)
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@vipLineage, @class) == 1) {
		}else if (has(@revolutionaryLineage, @class) == 1) {
			setv(@allObjectiveClass, revolutionary)
			addv(@allObjectiveClass, revolutionary)
			addv(@allObjectiveClass, revolutionary)
			addv(@allObjectiveClass, revolutionary)
			index(@allObjectiveClass, objectiveNumber, @objectiveClass)
		}else if (has(@zombieLineage, @class) == 1) {
		}else if (has(@felLineage, @class) == 1) {
		}
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(sealDelete)】カウント変動処理)▼▼★
//▼▼【解説】・一時ユニットの持つ一時能力スキル「固有能力封印(seal10〜seal2)」のカウントを進める。
//▼▼もし(seal1)であればそのまま除去。
//▼▼またその他のカウント進行要素を持つスキルの変動も同様に実行する。
//▼▼(※基本的にこのルーチンは消去フェイズではなく個別処理開始タイミングで使用する)
//▼▼※呼び出し前「一時ユニット@unit」「一時ユニット所持スキル@skill」に中身が必要。
event sealDelete
{
	storeskillset(sealskillset,@skillset)
	set(idx,0)
	while (idx<10) {
		index(@skillset,idx,@Countskill)
		if (has(@skill,@Sealskill) == 1) {
			eraseSkill(@unit,@Countskill)
			if (idx!=0) {
				sub(idx,1)
				index(@skillset,idx,@Countskill)
				addSkill(@unit,@Countskill)
			}
			break()
		}
		add(idx,1)
	}
	
	storeskillset(elationskillset,@skillset)
	set(idx,0)
	while (idx<10) {
		index(@skillset,idx,@Countskill)
		if (has(@skill,@Sealskill) == 1) {
			eraseSkill(@unit,@Countskill)
			if (idx!=0) {
				sub(idx,1)
				index(@skillset,idx,@Countskill)
				addSkill(@unit,@Countskill)
			}
			break()
		}
		add(idx,1)
	}
	
	storeskillset(metamorphosistimeskillset,@skillset)
	set(idx,0)
	while (idx<10) {
		index(@skillset,idx,@Countskill)
		if (has(@skill,@Sealskill) == 1) {
			eraseSkill(@unit,@Countskill)
			if (idx!=0) {
				sub(idx,1)
				index(@skillset,idx,@Countskill)
				addSkill(@unit,@Countskill)
			}
			else {
				storeud(SAVEmetamorphosisBeforeClass, @metamorphosisBeforeClass)
				setv(@class, @metamorphosisBeforeClass)
				changeClass(@unit, @class)
				pushLevel(@unit, level)
				setLevel(@unit, 1)
				sub(level, 1)
				addLevel(@unit, level)
				if (level == 0) {
					addLevel(@unit, 1)
					setLevel(@unit, 1)
				}
				storeMemberOfUnit(@unit, @allMember)
				storeAllTalent(@allTalent)
				subv(@allMember, @allTalent)
				while (count(@allMember) >= 1) {
					index(@allMember, 0, @member)
					subv(@allMember, @member)
					changeClass(@member, @class)
					pushLevel(@member, level)
					setLevel(@member, 1)
					sub(level, 1)
					addLevel(@member, level)
					if (level == 0) {
						addLevel(@member, 1)
						setLevel(@member, 1)
					}
				}
			}
			break()
		}
		add(idx,1)
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(classChangeUnitSet)クラスチェンジ簡易審査】▼▼★
//▼▼【解説】・ここで候補者に一次審査を行い、
//▼▼合格ならクラスチェンジ実行者(@allClassChangeUnit)へ登録する。
//▼▼また「特殊クラスチェンジ」を行う実行者(@allSpClassChangeUnit)も審査して登録。
//▼▼（※変身スキル所持者は変身中ならば上記実行者から除外）
//▼▼※呼び出し前「一時ユニット@unit」「一時スキル@skill」に中身が必要。
event classChangeUnitSet
{
	if (has(@skill, energycard) == 1 && has(@skill, picky) == 0) {
		addv(@allClassChangeUnit, @unit)
	}else if (has(@skill, energycard) == 1 && has(@skill, picky) == 1) {
		if (has(@skill, seal1) == 1 || has(@skill, seal2) == 1 || has(@skill, seal3) == 1 || has(@skill, seal4) == 1 || has(@skill, seal5) == 1 || has(@skill, seal6) == 1 || has(@skill, seal7) == 1 || has(@skill, seal8) == 1 || has(@skill, seal9) == 1 || has(@skill, seal10) == 1) {
			addv(@allClassChangeUnit, @unit)
		}
	}
	if (has(@skill, ccpass) == 1) {
		storeud(SAVEnoSpChangeUnit, @noSpChangeUnit)
		if (has(@skill, picky) == 0 && has(@noSpChangeUnit, @unit) == 0) {
			addv(@allSpClassChangeUnit, @unit)
		}else if (has(@skill, picky) == 1 && has(@noSpChangeUnit, @unit) == 0) {
			if (has(@skill, seal1) == 1 || has(@skill, seal2) == 1 || has(@skill, seal3) == 1 || has(@skill, seal4) == 1 || has(@skill, seal5) == 1 || has(@skill, seal6) == 1 || has(@skill, seal7) == 1 || has(@skill, seal8) == 1 || has(@skill, seal9) == 1 || has(@skill, seal10) == 1) {
				addv(@allSpClassChangeUnit, @unit)
			}
		}
	}
	if (has(@skill, metamorphosis) == 1) {
		if (has(@skill, metamorphosistime10) == 1 || has(@skill, metamorphosistime9) == 1 || has(@skill, metamorphosistime8) == 1 || has(@skill, metamorphosistime7) == 1 || has(@skill, metamorphosistime6) == 1 || has(@skill, metamorphosistime5) == 1 || has(@skill, metamorphosistime4) == 1 || has(@skill, metamorphosistime3) == 1 || has(@skill, metamorphosistime2) == 1 || has(@skill, metamorphosistime1) == 1) {
			subv(@allClassChangeUnit, @unit)
			subv(@allSpClassChangeUnit, @unit)
		}
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(classChangeUnitSet_player)クラスチェンジ簡易審査(プレイヤー専用)】▼▼★
//▼▼【解説】・ここで候補者に一次審査を行い、
//▼▼合格ならクラスチェンジ実行者(@allClassChangeUnit)へ登録する。
//▼▼また「特殊クラスチェンジ」を行う実行者(@allSpClassChangeUnit)も審査して登録。
//▼▼（※変身スキル所持者は変身中ならば上記実行者から除外）
//▼▼
//▼▼なおこれはプレイヤーターン専用処理なため(@allAutoClassChangeUnit)に登録されていなければ、
//▼▼クラスチェンジ実行者(@allClassChangeUnit)＆(@allSpClassChangeUnit)には追加されない。
//▼▼※呼び出し前「一時ユニット@unit」「一時スキル@skill」に中身が必要。
event classChangeUnitSet_player
{
	if (has(@allAutoClassChangeUnit, @unit) == 1) {
		if (has(@skill, energycard) == 1 && has(@skill, picky) == 0) {
			addv(@allClassChangeUnit, @unit)
		}else if (has(@skill, energycard) == 1 && has(@skill, picky) == 1) {
			if (has(@skill, seal1) == 1 || has(@skill, seal2) == 1 || has(@skill, seal3) == 1 || has(@skill, seal4) == 1 || has(@skill, seal5) == 1 || has(@skill, seal6) == 1 || has(@skill, seal7) == 1 || has(@skill, seal8) == 1 || has(@skill, seal9) == 1 || has(@skill, seal10) == 1) {
				addv(@allClassChangeUnit, @unit)
			}
		}
		if (has(@skill, ccpass) == 1) {
			storeud(SAVEnoSpChangeUnit, @noSpChangeUnit)
			if (has(@skill, picky) == 0 && has(@noSpChangeUnit, @unit) == 0) {
				addv(@allSpClassChangeUnit, @unit)
			}else if (has(@skill, picky) == 1 && has(@noSpChangeUnit, @unit) == 0) {
				if (has(@skill, seal1) == 1 || has(@skill, seal2) == 1 || has(@skill, seal3) == 1 || has(@skill, seal4) == 1 || has(@skill, seal5) == 1 || has(@skill, seal6) == 1 || has(@skill, seal7) == 1 || has(@skill, seal8) == 1 || has(@skill, seal9) == 1 || has(@skill, seal10) == 1) {
					addv(@allSpClassChangeUnit, @unit)
				}
			}
		}
		if (has(@skill, metamorphosis) == 1) {
			if (has(@skill, metamorphosistime10) == 1 || has(@skill, metamorphosistime9) == 1 || has(@skill, metamorphosistime8) == 1 || has(@skill, metamorphosistime7) == 1 || has(@skill, metamorphosistime6) == 1 || has(@skill, metamorphosistime5) == 1 || has(@skill, metamorphosistime4) == 1 || has(@skill, metamorphosistime3) == 1 || has(@skill, metamorphosistime2) == 1 || has(@skill, metamorphosistime1) == 1) {
				subv(@allClassChangeUnit, @unit)
				subv(@allSpClassChangeUnit, @unit)
			}
		}
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(classRank)】クラス別Ｒａｎｋ読み込み)▼▼★
//▼▼【解説】・一時ユニットのクラスを調べ、その戦闘Ｒａｎｋと経済Ｒａｎｋを
//▼▼「battleRank」と「economyRank」に入力する。
//▼▼(※なお盗人リーダーの「furosiki」所持者数カウントもここで実行。勢力戦略関連)
//▼▼※呼び出し前「一時ユニット@unit」に中身が必要。
event classRank
{
	storeBaseClassOfUnit(@unit, @class)
	setv(@memoryunit,memoryunit_)
	addstr(@memoryunit,@class)
	pusustatus(@memoryunit,attack,battleRank)
	pusustatus(@memoryunit,defense,economyRank)
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(fluctuateRank)】人材スキルのＲａｎｋ干渉)▼▼★
//▼▼【解説】・人材の持つ「経済技能」スキルをＲａｎｋに反映させる処理。
//▼▼※呼び出し前「一時ユニット所持スキル@skill」に中身が必要。
event fluctuateRank
{
	if (has(@skill, command_s_all) == 1 || has(@skill, command_s_dual) == 1 || has(@skill, command_s_protection) == 1) {
		per(battleRank, 200)
	}else if (has(@skill, command_a_highattack) == 1 || has(@skill, command_a_highdefense) == 1 || has(@skill, command_a_highmagic) == 1 || has(@skill, command_a_highmagdef) == 1 || has(@skill, command_a_highdext) == 1) {
		per(battleRank, 150)
	}else if (has(@skill, command_b_basic) == 1 || has(@skill, command_b_material) == 1 || has(@skill, command_b_sorcery) == 1) {
		per(battleRank, 100)
	}else if (has(@skill, command_c_attack) == 1 || has(@skill, command_c_defense) == 1 || has(@skill, command_c_magic) == 1 || has(@skill, command_c_magdef) == 1 || has(@skill, command_c_dext) == 1) {
		per(battleRank, 50)
	}else if (has(@skill, command_d_nothing) == 1) {
		set(battleRank, 0)
	}
	if (has(@skill, economy_s) == 1) {
		per(economyRank, 200)
	}else if (has(@skill, economy_a) == 1) {
		per(economyRank, 150)
	}else if (has(@skill, economy_b) == 1) {
		per(economyRank, 100)
	}else if (has(@skill, economy_c) == 1) {
		per(economyRank, 50)
	}else if (has(@skill, economy_d) == 1) {
		set(economyRank, 0)
	}

	if (has(@skill, shyness) == 1) {
		set(battleRank, 0)
		set(economyRank, 0)
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(uniqueAbilityPossessor)】固有能力発動者リスト登録)▼▼★
//▼▼【解説】・一時ユニットが持つ固有能力スキルを調べ、所持していれば
//▼▼固有能力発動者リスト(@all??????Unit)に登録する。
//▼▼※呼び出し前「一時ユニット@unit」「一時ユニット所持スキル@skill」に中身が必要。
event uniqueAbilityPossessor
{
	if (isLeader(@unit) == 1 && has(@skill, seal1) == 0 && has(@skill, seal2) == 0 && has(@skill, seal3) == 0 && has(@skill, seal4) == 0 && has(@skill, seal5) == 0 && has(@skill, seal6) == 0 && has(@skill, seal7) == 0 && has(@skill, seal8) == 0 && has(@skill, seal9) == 0 && has(@skill, seal10) == 0) {
		storeskillofunit(@unit,@traitskill)
		setv(@traitskill2,@traitskill)
		subv(@traitskill2,educate) 
		subv(@traitskill2,innovation)
		subv(@traitskill2,assistant)
		subv(@traitskill2,treatment)
		subv(@traitskill2,glibtalker)
		subv(@traitskill2,invent)
		subv(@traitskill2,rich)
		subv(@traitskill2,recruiter_machine)
		subv(@traitskill2,recruiter_worker)
		subv(@traitskill2,recruiter_assassin)
		subv(@traitskill2,desiretoprotect)
		subv(@traitskill2,sociable)
		subv(@traitskill2,shyness)
		subv(@traitskill2,absolute)
		subv(@traitskill2,charismatic)
		subv(@traitskill2,loyalsubject_nini)
		subv(@traitskill2,loyalsubject_honoka)
		subv(@traitskill2,loyalsubject_ouen)
		subv(@traitskill2,loyalsubject_kamiya)
		subv(@traitskill2,loyalsubject_daiya)
		subv(@traitskill2,loyalsubject_himesiro)
		subv(@traitskill2,loyalsubject_riferi)
		subv(@traitskill2,loyalsubject_rifon)
		subv(@traitskill2,loyalsubject_gaagoriusu)
		subv(@traitskill2,loyalsubject_suiren)
		subv(@traitskill2,loyalsubject_kizaki)
		subv(@traitskill2,loyalsubject_veiraru)
		subv(@traitskill2,loyalsubject_isikawa)
		subv(@traitskill2,loyalsubject_ryudou)
		subv(@traitskill2,loyalsubject_fel)
		subv(@traitskill2,rational)
		subv(@traitskill2,materialguard)
		subv(@traitskill2,magicguard)
		subv(@traitskill2,calm)
		subv(@traitskill2,nuisance)
		subv(@traitskill2,affectionate)
		subv(@traitskill2,coldblood)
		subv(@traitskill2,moodyperson)
		subv(@traitskill2,eccentric)
		subv(@traitskill2,madness)
		subv(@traitskill2,serious)
		subv(@traitskill2,twosides)
		subv(@traitskill2,warlike)
		subv(@traitskill2,hardworker)
		subv(@traitskill2,moodmaker)
		subv(@traitskill2,sensualist_male)
		subv(@traitskill2,sensualist_female)
		subv(@traitskill2,picky)
		subv(@traitskill2,sadist)
		subv(@traitskill2,masochist)
		subv(@traitskill2,wishclass_artist)
		subv(@traitskill2,wishclass_shotputter)
		subv(@traitskill2,wishclass_ninga)
		subv(@traitskill2,wishclass_bakuto)
		subv(@traitskill2,wishclass_mizusyoubai)
		subv(@traitskill2,wishclass_bike)
		subv(@traitskill2,wishclass_thief)
		subv(@traitskill2,wishclass_dealer)
		subv(@traitskill2,skillshare_assaultrifle)
		subv(@traitskill2,skillshare_grenadegun)
		subv(@traitskill2,skillshare_torpedo)
		subv(@traitskill2,skillshare_sniperrifle)
		subv(@traitskill2,skillshare_poisonousdrug)
		subv(@traitskill2,skillshare_sparkcutter)
		subv(@traitskill2,skillshare_temptationconf)
		subv(@traitskill2,slowstarter)
		subv(@traitskill2,weakling)
		subv(@traitskill2,metamorphosis)
		subv(@traitskill2,uniquemagic)
		subv(@traitskill,@traitskill2)
		
		while (@traitskill!=0) {
			index(@traitskill,0,@traitskill2) subv(@traitskill,@traitskill2)
			setv(@traitskillevent,traitskillevent_)
			addstr(@traitskillevent,@traitskill)
			
			pushLevel(@unit, unitLevel)
			pushLoyal(@unit, unitLoyal)
			storeSkillOfUnit(@unit, @skill)
			storeSpotOfUnit(@unit, @spot)
			storeLeaderOfSpot(@spot, @allSpotLeader)
			routine(@traitskillevent)
		}
//[大器晩成(２)]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※ステータス低下系一時能力スキル無効(発動前除去)※____________________________________________________________________________________________________
		while (count(@allSlowstarterUnit2) >= 1) {
			index(@allSlowstarterUnit2, 0, @unit)
			subv(@allSlowstarterUnit2, @unit)
			storeSkillOfUnit(@unit, @skill)

			subv(@allAllweakenGetUnit, @unit)
			subv(@allHighallweakenGetUnit, @unit)
		}
//[忠臣(２)]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル［忠誠低下無効］を付与※____________________________________________________________________________________________________
		while (count(@allLoyalsubjectUnit2) >= 1) {
			index(@allLoyalsubjectUnit2, 0, @unit)
			subv(@allLoyalsubjectUnit2, @unit)

			addv(@allLoyaltykeepGetUnit, @unit)
		}
//[合理的思考(２)]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「ＨＰ＆ＭＰ上昇」を付与※____________________________________________________________________________________________________
		while (count(@allRationalUnit2) >= 1) {
			index(@allRationalUnit2, 0, @unit)
			subv(@allRationalUnit2, @unit)
			storeSkillOfUnit(@unit, @skill)
			storeSpotOfUnit(@unit, @spot)
			storeLeaderOfSpot(@spot, @allSpotLeader)
			subv(@allSpotLeader, @allEccentricUnit)
			if (has(@allSpotLeader, @unit) == 0) {
				addv(@allSpotLeader, @unit)
			}

			if (has(@skill, innovation) == 1 || has(@skill, materialguard) == 1 || has(@skill, magicguard) == 1) {
				pushLevel(@unit, unitLevel)
				if (has(@allDoubleGetUnit, @unit) == 0 && unitLevel >= 21) {
					addv(@allHpmpaidGetUnit, @allSpotLeader)
					addv(@allLoyaltybufferGetUnit, @allSpotLeader)
				}else if (has(@allDoubleGetUnit, @unit) == 1 && unitLevel >= 21) {
					addv(@allHighhpmpaidGetUnit, @allSpotLeader)
					addv(@allLoyaltykeepGetUnit, @allSpotLeader)
				}
			}
		}
//[男好き＆女好き(２)]〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//※一時能力スキル「ＨＰ＆ＭＰ上昇」「忠誠低下抑制」を付与※____________________________________________________________________________________________________
		while (count(@allSensualistUnit2) >= 1) {
			index(@allSensualistUnit2, 0, @unit)
			subv(@allSensualistUnit2, @unit)
			storeSkillOfUnit(@unit, @skill)

			if (has(@allDoubleGetUnit, @unit) == 0) {
				addv(@allHpmpaidGetUnit, @unit)
				addv(@allLoyaltybufferGetUnit, @unit)
			}else if (has(@allDoubleGetUnit, @unit) == 1) {
				addv(@allHighhpmpaidGetUnit, @unit)
				addv(@allLoyaltykeepGetUnit, @unit)
			}
		}
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//ツール系多目的ルーチン■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(allLineageLoad)】全系統解凍)▼▼★
//▼▼【解説】・セーブ済系統を解凍して各系統(@????Lineage)に全出力するツール系のルーチン。
event allLineageLoad
{
	storeud(SAVEguideLineage, @guideLineage)
	storeud(SAVEarmyLineage, @armyLineage)
	storeud(SAVEmachineLineage, @machineLineage)
	storeud(SAVEstudentLineage, @studentLineage)
	storeud(SAVEspiritLineage, @spiritLineage)
	storeud(SAVEgokudouLineage, @gokudouLineage)
	storeud(SAVEpublicservantLineage, @publicservantLineage)
	storeud(SAVEgroupLineage, @groupLineage)
	storeud(SAVEworkerLineage, @workerLineage)
	storeud(SAVEpriestLineage, @priestLineage)
	storeud(SAVEoutlawLineage, @outlawLineage)
	storeud(SAVEtempworkerLineage, @tempworkerLineage)
	storeud(SAVEassassinLineage, @assassinLineage)
	storeud(SAVEvipLineage, @vipLineage)
	storeud(SAVErevolutionaryLineage, @revolutionaryLineage)
	storeud(SAVEzombieLineage, @zombieLineage)
	storeud(SAVEfelLineage, @felLineage)
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(lineageLoad)】系統別個別出力)▼▼★
//▼▼【解説】・系統番号(lineageNumber)に入力された数値を
//▼▼系統クラス詰合せ(@lineage)に出力するツール系のルーチン。
//▼▼※呼び出し前「系統番号lineageNumber」に中身が必要。
event lineageLoad
{
			if (lineageNumber == 1) {
				storeud(SAVEguideLineage, @guideLineage)
				setv(@lineage, @guideLineage)
			}else if (lineageNumber == 2) {
				storeud(SAVEarmyLineage, @armyLineage)
				setv(@lineage, @armyLineage)
			}else if (lineageNumber == 3) {
				storeud(SAVEmachineLineage, @machineLineage)
				setv(@lineage, @machineLineage)
			}else if (lineageNumber == 4) {
				storeud(SAVEstudentLineage, @studentLineage)
				setv(@lineage, @studentLineage)
			}else if (lineageNumber == 5) {
				storeud(SAVEspiritLineage, @spiritLineage)
				setv(@lineage, @spiritLineage)
			}else if (lineageNumber == 6) {
				storeud(SAVEgokudouLineage, @gokudouLineage)
				setv(@lineage, @gokudouLineage)
			}else if (lineageNumber == 7) {
				storeud(SAVEpublicservantLineage, @publicservantLineage)
				setv(@lineage, @publicservantLineage)
			}else if (lineageNumber == 8) {
				storeud(SAVEgroupLineage, @groupLineage)
				setv(@lineage, @groupLineage)
			}else if (lineageNumber == 9) {
				storeud(SAVEworkerLineage, @workerLineage)
				setv(@lineage, @workerLineage)
			}else if (lineageNumber == 10) {
				storeud(SAVEpriestLineage, @priestLineage)
				setv(@lineage, @priestLineage)
			}else if (lineageNumber == 11) {
				storeud(SAVEoutlawLineage, @outlawLineage)
				setv(@lineage, @outlawLineage)
			}else if (lineageNumber == 21) {
				storeud(SAVEtempworkerLineage, @tempworkerLineage)
				setv(@lineage, @tempworkerLineage)
			}else if (lineageNumber == 22) {
				storeud(SAVEassassinLineage, @assassinLineage)
				setv(@lineage, @assassinLineage)
			}else if (lineageNumber == 23) {
				storeud(SAVEvipLineage, @vipLineage)
				setv(@lineage, @vipLineage)
			}else if (lineageNumber == 24) {
				storeud(SAVErevolutionaryLineage, @revolutionaryLineage)
				setv(@lineage, @revolutionaryLineage)
			}else if (lineageNumber == 25) {
				storeud(SAVEzombieLineage, @zombieLineage)
				setv(@lineage, @zombieLineage)
			}else if (lineageNumber == 99) {
				storeud(SAVEfelLineage, @felLineage)
				setv(@lineage, @felLineage)
			}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(friendData)】雇用者書き換え)▼▼★
//▼▼【解説】・一時ユニットからfriendデータを消去して、属しているクラスのものに書き換える。
//▼▼他系統のクラスチェンジ後やクラスリセット後にて使用。
//▼▼※呼び出し前「一時ユニット@unit」に中身が必要。
event friendData
{
	eraseFriend(@unit)
	storeBaseClassOfUnit(@unit, @class)
	routine(allLineageLoad)
	if (has(@guideLineage, @class) == 1) {
		addFriend(@unit, human, nini, yugu, dhidet, eraa, siruria, cou, hikari, miru, hokiru, sebasuto, zeusu, tempworkerm, tempworkerw)
	}else if (has(@armyLineage, @class) == 1) {
		addFriend(@unit, human, honoka, katuki, fef, rex, kamiya, kukumi, orusai, sarina, ryuun, armyleaderA, armyleaderB, armyleaderC, armyleaderD, armyleaderE, armyleaderF, tempworkerm, tempworkerw)
	}else if (has(@machineLineage, @class) == 1) {
		addFriend(@unit, human, daiya, maerunet, togeringo, heart, godou, bandana, w_tng, triplegaze, kaomozityan, eye, tatarira, tortoise, silkhat, matu, take, ume, machineleaderA, machineleaderB, machineleaderC, machineleaderD, machineleaderE, machineleaderF, machineleaderG, machineleaderH, tempworkerm, tempworkerw)
	}else if (has(@studentLineage, @class) == 1) {
		addFriend(@unit, human, himesiro, saseguti, yuzu, saon, eifon, fugaku, hiiragi, hotaru, kasugaya, serisu, touza, haruka, maeru, mizuna, studentleaderA, studentleaderB, studentleaderC, studentleaderD, studentleaderE, studentleaderF, studentleaderG, studentleaderH, tempworkerm, tempworkerw)
	}else if (has(@spiritLineage, @class) == 1) {
		addFriend(@unit, human, riferi, rifon, roton, kurumu, rerafu, gaagoriusu, pooto, virado, zora, spiritleaderA, spiritleaderB, spiritleaderC, spiritleaderD, tempworkerm, tempworkerw)
	}else if (has(@gokudouLineage, @class) == 1) {
		addFriend(@unit, human, suiren, kizaki, yasu, cogarasi, eihamu, gogozii, migazi, zakuro, mimika, mirika, gokudouleaderA, gokudouleaderB, gokudouleaderC, gokudouleaderD, gokudouleaderE, gokudouleaderF, tempworkerm, tempworkerw)
	}else if (has(@publicservantLineage, @class) == 1) {
		addFriend(@unit, human, congou, rina, hino, coutyou, kyoutou, nisu, nozaka, sin, tumiki, asamiya, publicservantleaderA, publicservantleaderB, publicservantleaderC, publicservantleaderD, publicservantleaderE, publicservantleaderF, tempworkerm, tempworkerw)
	}else if (has(@groupLineage, @class) == 1) {
		addFriend(@unit, human, gimahi, dokunuma, hebigo, geki, medyuusa, sirakaba, tosaki, youhi, kanae, groupleaderA, groupleaderB, groupleaderC, groupleaderD, groupleaderE, groupleaderF, tempworkerm, tempworkerw)
	}else if (has(@workerLineage, @class) == 1) {
		addFriend(@unit, human, sekkai, naobosi, myaumyau, yuki, yumi, nanaka, ebisu, kakkou, kazaguruma, saezumi, yadati, syau, ruuna, tatibana, workerleaderA, workerleaderB, workerleaderC, workerleaderD, workerleaderE, workerleaderF, workerleaderG, workerleaderH, workerleaderI, workerleaderJ, tempworkerm, tempworkerw)
	}else if (has(@priestLineage, @class) == 1) {
		addFriend(@unit, human, veiraru, veil, furient, hellun, outhi, poopoo, tetetota, priestleaderA, priestleaderB, priestleaderC, priestleaderD, priestleaderE, priestleaderF, tempworkerm, tempworkerw)
	}else if (has(@outlawLineage, @class) == 1) {
		addFriend(@unit, human, tousi, cogi, rin, isikawa, mouseboy, inaba, ariel, rakuyou, ryuuga, sugamiya, tyami, nami, igasi, outlawleaderA, outlawleaderB, outlawleaderC, outlawleaderD, outlawleaderE, outlawleaderF, tempworkerm, tempworkerw)
	}else if (has(@tempworkerLineage, @class) == 1) {
		addFriend(@unit, human, tempworkerm, tempworkerw)
	}else if (has(@assassinLineage, @class) == 1) {
		addFriend(@unit, human, youiti, hourisu, kiyuno, izuki, siraki, ivii, az, codec, riiten, assassinleaderA, assassinleaderB, assassinleaderC, assassinleaderD, tempworkerm, tempworkerw)
	}else if (has(@vipLineage, @class) == 1) {
		addFriend(@unit, human, kurofukug, kurofukum, utari, ibari, rifaru, ryudou, ouen, burai, hikage, raigyou, romi, suzama, vipleaderA, vipleaderB, vipleaderC, vipleaderD, tempworkerm, tempworkerw)
	}else if (has(@revolutionaryLineage, @class) == 1) {
		addFriend(@unit, human, revolutionaryleaderA, revolutionaryleaderB, revolutionaryleaderC, revolutionaryleaderD, revolutionaryleaderE, revolutionaryleaderF, revolutionaryleaderG, revolutionaryleaderH, tempworkerm, tempworkerw)
	}else if (has(@zombieLineage, @class) == 1) {
	}else if (has(@felLineage, @class) == 1) {
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(sleepCountSetTool)】睡眠カウント変換ツール)▼▼★
//▼▼【解説】休暇ユニットの所持する睡眠スキルを数値変数(sleepcount)へ変換するツールイベント。
//▼▼※呼び出し前「休暇人材所持スキル@PSUallskill」に中身が必要。
event sleepCountSetTool
{
	set(sleepcount, 0)
	if (has(@PSUallskill, unitsleeping7) == 1) {
		set(sleepcount, 7)
	}else if (has(@PSUallskill, unitsleeping6) == 1) {
		set(sleepcount, 6)
	}else if (has(@PSUallskill, unitsleeping5) == 1) {
		set(sleepcount, 5)
	}else if (has(@PSUallskill, unitsleeping4) == 1) {
		set(sleepcount, 4)
	}else if (has(@PSUallskill, unitsleeping3) == 1) {
		set(sleepcount, 3)
	}else if (has(@PSUallskill, unitsleeping2) == 1) {
		set(sleepcount, 2)
	}else if (has(@PSUallskill, unitsleeping1) == 1) {
		set(sleepcount, 1)
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(talkEventTool)】会話イベント準備ツール)▼▼★
//▼▼【解説】会話イベント発生前に実行するツールイベント。
//▼▼会話のスキップチェックと画面移動＆マーク付与等の演出を実行する。
event talkEventTool
{
	if (SWITCHskip == 10 || SWITCHskip == 11){
		choiceTitle(会話イベントを見ますか？)
		choice(choiceNumber, 見る, 見ない)
		if (choiceNumber == 0){
			set(SWITCHskip, 10)
		}else if (choiceNumber == 1) {
			set(SWITCHskip, 11)
		}
		choiceTitle(選択ウィンドウ)
	}
	if (SWITCHskip == 0 || SWITCHskip == 10){
		storeud(SAVEkeyPower, @keyPower)
		storeMasterOfPower(@keyPower, @keyMaster)
		scroll(@keyMaster)
		spotmark(@keyMaster, 0)
		wait(80)
		spotmark()
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(EVlevelupTool)】下限レベル以下ユニット強化ツール)▼▼★
//▼▼【解説】・下限設定レベルを下回る人材（とその部下）を下限レベルまで上昇させ強化するツールイベント。
//▼▼※呼び出し前「一時ユニット@unit」「下限設定レベルlowestLevel」に中身が必要。
event EVlevelupTool
{
	pushLevel(@unit, level)
	if (level < lowestLevel) {
		set(level, lowestLevel)
	}
	setLevel(@unit, 1)
	sub(level, 1)
	addLevel(@unit, level)
	if (level == 0) {
		addLevel(@unit, 1)
		setLevel(@unit, 1)
	}
	storeMemberOfUnit(@unit, @allMember)
	while (count(@allMember) >= 1) {
		index(@allMember, 0, @member)
		subv(@allMember, @member)

		setLevel(@member, 1)
		addLevel(@member, level)
		if (level == 0) {
			addLevel(@member, 1)
			setLevel(@member, 1)
		}
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■

//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//▼▼(【routine(EVaddUnitTool)】イベントユニット追加ツール)▼▼★
//▼▼【解説】イベントにてユニットを追加する処理で実行。
//▼▼追加させる勢力に空きがあればそのまま追加し、なければ所属勢力登録後休暇(※１ターン)させる。
//▼▼※呼び出し前「追加ユニット@EVaddUnit」「ユニット追加勢力@EVaddPower」に中身が必要。
//▼▼※一度も出現してないユニットを放浪追加させるときはスリープスキルが付かないので注意。
event EVaddUnitTool
{
	storeSpotOfPower(@EVaddPower, @EVallAddSpot)
	storeLeaderOfSpot(@EVallAddSpot, @EVaddLeader)
	set(EVpowerCapa, 0)
	while (count(@EVallAddSpot) >= 1) {
		index(@EVallAddSpot, 0, @addSpot)
		subv(@EVallAddSpot, @addSpot)
		pushCapa(@addSpot, spotCapa)
		add(EVpowerCapa, spotCapa)
	}
	pushv(@EVaddLeader, EVaddLeaderCount)
	sub(EVpowerCapa, EVaddLeaderCount)
	if (EVpowerCapa >= 1) {
		addUnit(@EVaddUnit, @EVaddPower)
	}else if (EVpowerCapa <= 0) {
		setv(@temporaryPower, @power)
		setv(@power, @EVaddPower)
		setv(@unit, @EVaddUnit)
		set(EVsleep, 1)
		set(purpose, 1)
		routine(privateData)
		routine(sleepRemoval)
		set(EVsleep, 0)
		setv(@power, @temporaryPower)
		storeud(SAVEkeyPower, @keyPower)
		if (@keyPower == @EVaddPower) {
			dialog(プレイヤー勢力へ追加される人材「&EVaddUnit&」は勢力人数が一杯のため追加されませんでした$休暇処理（※１ターン復帰）となります)
		}
	}
}
//■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
//〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓
